<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>植物识别日记</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .sidebar {
            background-color: #9ed5a0;
        }
        .main-content {
            background-color: #fffce8;
        }
        .card {
            transition: all 0.3s ease;
        }
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const App = () => {
            const [activeTab, setActiveTab] = useState("全部条目");
            const [plantEntries, setPlantEntries] = useState([
                {
                    id: 1,
                    date: "2024-06-10",
                    name: "玉兰花",
                    description: "在校园里发现的，花冠呈白色带有香气。",
                    category: "花卉",
                    image: "https://picsum.photos/id/152/800/600",
                    importance: "高可视"
                },
                {
                    id: 2,
                    date: "2024-06-12",
                    name: "银杏",
                    description: "叶子扇面形，非常独特。",
                    category: "树木",
                    image: "https://picsum.photos/id/118/800/600",
                    importance: "中等"
                },
                {
                    id: 3,
                    date: "2024-06-14",
                    name: "蒲公英",
                    description: "路边经常可见，种子可以随风飘散。",
                    category: "草本",
                    image: "https://picsum.photos/id/144/800/600",
                    importance: "低可视"
                }
            ]);
            const [filteredEntries, setFilteredEntries] = useState([...plantEntries]);
            const [showEditModal, setShowEditModal] = useState(false);
            const [showDeleteModal, setShowDeleteModal] = useState(false);
            const [showAddModal, setShowAddModal] = useState(false);
            const [currentEntry, setCurrentEntry] = useState(null);
            const [expandedHelp, setExpandedHelp] = useState(null);

            useEffect(() => {
                if (activeTab === "全部条目") {
                    setFilteredEntries([...plantEntries]);
                } else {
                    setFilteredEntries(plantEntries.filter(entry => entry.category === activeTab));
                }
            }, [activeTab, plantEntries]);

            const handleTabClick = (tab) => {
                setActiveTab(tab);
            };

            const handleEditClick = (entry) => {
                setCurrentEntry({...entry});
                setShowEditModal(true);
            };

            const handleDeleteClick = (entry) => {
                setCurrentEntry(entry);
                setShowDeleteModal(true);
            };

            const confirmDelete = () => {
                setPlantEntries(plantEntries.filter(entry => entry.id !== currentEntry.id));
                setShowDeleteModal(false);
            };

            const handleAddNew = () => {
                setCurrentEntry({
                    id: Date.now(),
                    date: "2025-09-23",
                    name: "",
                    description: "",
                    category: "花卉",
                    image: "https://picsum.photos/id/152/800/600",
                    importance: "高可视"
                });
                setShowAddModal(true);
            };

            const toggleHelp = (section) => {
                if (expandedHelp === section) {
                    setExpandedHelp(null);
                } else {
                    setExpandedHelp(section);
                }
            };

            return (
                <div className="flex h-screen">
                    {/* Sidebar */}
                    <div className="sidebar w-48 flex flex-col">
                        <div className="p-4">
                            <h1 className="text-xl font-bold text-gray-800">植物识别日记</h1>
                            <p className="text-xs text-gray-600">记录自然的奇妙</p>
                        </div>

                        <div className="flex-grow">
                            <ul className="space-y-2 pl-2 pr-2">
                                <li>
                                    <a className="flex items-center p-2 rounded-md hover:bg-green-600 hover:bg-opacity-25">
                                        <i className="fas fa-book-open mr-2"></i>
                                        <span className="font-medium">查看日记</span>
                                    </a>
                                </li>
                                <li>
                                    <a className="flex items-center p-2 rounded-md hover:bg-green-600 hover:bg-opacity-25">
                                        <i className="fas fa-calendar-day mr-2"></i>
                                        <span>活动日记</span>
                                    </a>
                                </li>
                                <li>
                                    <a className="flex items-center p-2 rounded-md hover:bg-green-600 hover:bg-opacity-25">
                                        <i className="fas fa-chart-bar mr-2"></i>
                                        <span>统计分析</span>
                                    </a>
                                </li>
                                <li>
                                    <a className="flex items-center p-2 rounded-md hover:bg-green-600 hover:bg-opacity-25">
                                        <i className="fas fa-question-circle mr-2"></i>
                                        <span>帮助说明</span>
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <div className="p-4 text-xs text-gray-600">
                            <p>今日心情：</p>
                            <p>全国共有347种植物正在观察中...</p>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className="main-content flex-1 overflow-auto">
                        {/* Tabs */}
                        <div className="flex p-2 bg-white">
                            {["全部条目", "树木", "花卉", "草本"].map(tab => (
                                <button
                                    key={tab}
                                    className={`px-4 py-2 rounded-full mx-1 ${activeTab === tab ? 'bg-green-600 text-white' : 'bg-gray-200 text-gray-700'}`}
                                    onClick={() => handleTabClick(tab)}
                                >
                                    {tab}
                                </button>
                            ))}
                        </div>

                        {/* Plant Cards */}
                        <div className="p-4">
                            <div className="grid grid-cols-3 gap-4">
                                {filteredEntries.map(entry => (
                                    <div key={entry.id} className="card bg-white rounded-lg overflow-hidden shadow">
                                        <div className="relative">
                                            <img 
                                                src={entry.image} 
                                                alt={entry.name} 
                                                className="w-full h-32 object-cover"
                                            />
                                            <div className="absolute top-2 right-2 flex space-x-2">
                                                <button 
                                                    className="bg-white p-1 rounded-full shadow"
                                                    onClick={() => handleEditClick(entry)}
                                                >
                                                    <i className="fas fa-pencil-alt text-green-600"></i>
                                                </button>
                                                <button 
                                                    className="bg-white p-1 rounded-full shadow"
                                                    onClick={() => handleDeleteClick(entry)}
                                                >
                                                    <i className="fas fa-trash-alt text-red-500"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div className="p-3">
                                            <div className="flex justify-between items-center">
                                                <span className="text-xs text-gray-500">{entry.date.replace(/(\d{4})-(\d{2})-(\d{2})/, "$1-$2-$3")}</span>
                                                <span className={`text-xs px-2 py-0.5 rounded ${
                                                    entry.importance === "高可视" ? "bg-green-100 text-green-800" :
                                                    entry.importance === "中等" ? "bg-yellow-100 text-yellow-800" :
                                                    "bg-red-100 text-red-800"
                                                }`}>
                                                    {entry.importance}
                                                </span>
                                            </div>
                                            <h3 className="text-lg font-semibold mt-1">{entry.name}</h3>
                                            <p className="text-sm text-gray-600 mt-1">{entry.description}</p>
                                            <span className="inline-block mt-2 px-2 py-0.5 bg-gray-100 text-xs rounded-full">
                                                {entry.category}
                                            </span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Right Panel */}
                    <div className="w-64 bg-gray-50 p-4 border-l border-gray-200">
                        <div className="bg-green-50 rounded-lg p-4 mb-4">
                            <div className="flex justify-between items-center">
                                <h2 className="text-3xl font-bold text-green-800">3</h2>
                                <span className="text-xs text-green-600">日记总数</span>
                            </div>

                            {/* Category Distribution */}
                            <div className="mt-4">
                                <h3 className="text-sm font-medium mb-2">分类占比</h3>
                                <div className="relative h-24">
                                    <img src="https://picsum.photos/id/200/200/200" alt="分类占比图表" className="w-full h-full object-contain" />
                                </div>
                                <div className="flex mt-1 text-xs justify-between">
                                    <div className="flex items-center">
                                        <div className="w-2 h-2 bg-green-500 mr-1"></div>
                                        <span>树木</span>
                                    </div>
                                    <div className="flex items-center">
                                        <div className="w-2 h-2 bg-blue-500 mr-1"></div>
                                        <span>花卉</span>
                                    </div>
                                    <div className="flex items-center">
                                        <div className="w-2 h-2 bg-yellow-500 mr-1"></div>
                                        <span>草本</span>
                                    </div>
                                </div>
                            </div>

                            {/* Trend Chart */}
                            <div className="mt-6">
                                <h3 className="text-sm font-medium mb-2">最近7天识别趋势</h3>
                                <div className="relative h-32">
                                    <img src="https://picsum.photos/id/201/200/200" alt="趋势图表" className="w-full h-full object-contain" />
                                </div>
                                <div className="flex justify-between mt-1 text-xs">
                                    <span>6/5日</span>
                                    <span>6/6日</span>
                                    <span>6/7日</span>
                                    <span>6/8日</span>
                                    <span>6/9日</span>
                                    <span>6/10日</span>
                                    <span>今天</span>
                                </div>
                            </div>

                            <p className="text-xs text-gray-500 mt-4 text-center">
                                打卡有惊喜，养成记录习惯才能有效学习
                            </p>
                        </div>

                        {/* Help Section */}
                        <div className="bg-white rounded-lg p-4 mb-2">
                            <h3 className="text-md font-medium mb-2">帮助说明</h3>
                            
                            <div className="border-b pb-2">
                                <div 
                                    className="flex justify-between items-center cursor-pointer" 
                                    onClick={() => toggleHelp("photo")}
                                >
                                    <h4 className="text-sm">如何拍照识别</h4>
                                    <i className={`fas fa-chevron-${expandedHelp === "photo" ? "up" : "down"}`}></i>
                                </div>
                                {expandedHelp === "photo" && (
                                    <p className="text-xs mt-2">
                                        拍摄植物时，点击"拍照识别"按钮上传。
                                    </p>
                                )}
                            </div>

                            <div className="border-b py-2">
                                <div 
                                    className="flex justify-between items-center cursor-pointer" 
                                    onClick={() => toggleHelp("edit")}
                                >
                                    <h4 className="text-sm">编辑日记条目</h4>
                                    <i className={`fas fa-chevron-${expandedHelp === "edit" ? "up" : "down"}`}></i>
                                </div>
                            </div>

                            <div className="pt-2">
                                <div 
                                    className="flex justify-between items-center cursor-pointer" 
                                    onClick={() => toggleHelp("login")}
                                >
                                    <h4 className="text-sm">登出与备份</h4>
                                    <i className={`fas fa-chevron-${expandedHelp === "login" ? "up" : "down"}`}></i>
                                </div>
                            </div>
                        </div>

                        <div className="text-xs text-green-800 flex items-center justify-center mt-4">
                            <i className="fas fa-mobile-alt mr-1"></i>
                            <span>Tips: 使用手机扫描植物时，请保持摄像头光线充足</span>
                        </div>
                    </div>

                    {/* Edit Modal */}
                    {showEditModal && currentEntry && (
                        <div className="fixed inset-0 flex items-center justify-center z-50 modal-backdrop">
                            <div className="bg-white rounded-lg w-2/5 max-h-90vh overflow-auto">
                                <div className="p-6">
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className="text-xl font-bold">编辑植物日记</h2>
                                        <button onClick={() => setShowEditModal(false)} className="text-gray-500 hover:text-gray-700">
                                            <i className="fas fa-times"></i>
                                        </button>
                                    </div>

                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">日期</label>
                                            <input 
                                                type="date" 
                                                className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500"
                                                value={currentEntry.date} 
                                                readOnly
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">植物名称</label>
                                            <input 
                                                type="text" 
                                                className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500" 
                                                value={currentEntry.name}
                                                readOnly
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">识别结果</label>
                                            <select 
                                                className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500"
                                                value={currentEntry.importance}
                                                readOnly
                                            >
                                                <option>高可视</option>
                                            </select>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">分类</label>
                                            <div className="flex space-x-4">
                                                <label className="flex items-center">
                                                    <input 
                                                        type="radio" 
                                                        name="category" 
                                                        value="树木" 
                                                        checked={currentEntry.category === "树木"} 
                                                        readOnly
                                                        className="mr-1" 
                                                    />
                                                    树木
                                                </label>
                                                <label className="flex items-center">
                                                    <input 
                                                        type="radio" 
                                                        name="category" 
                                                        value="花卉" 
                                                        checked={currentEntry.category === "花卉"} 
                                                        readOnly
                                                        className="mr-1" 
                                                    />
                                                    花卉
                                                </label>
                                                <label className="flex items-center">
                                                    <input 
                                                        type="radio" 
                                                        name="category" 
                                                        value="草本" 
                                                        checked={currentEntry.category === "草本"} 
                                                        readOnly
                                                        className="mr-1" 
                                                    />
                                                    草本
                                                </label>
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">笔记</label>
                                            <textarea 
                                                className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500 h-24"
                                                value={currentEntry.description}
                                                readOnly
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">图片</label>
                                            <div className="border rounded-md p-2">
                                                <img 
                                                    src={currentEntry.image} 
                                                    alt={currentEntry.name} 
                                                    className="w-full h-48 object-contain" 
                                                />
                                                <div className="flex justify-center mt-2">
                                                    <button className="text-blue-500 text-sm flex items-center">
                                                        <i className="fas fa-camera mr-1"></i> 添加图片
                                                    </button>
                                                </div>
                                                <div className="text-xs text-gray-500 text-center mt-1">
                                                    (此处提示上传照片，支持常见格式)
                                                </div>
                                            </div>
                                        </div>

                                        <div className="flex justify-end space-x-2 pt-4">
                                            <button 
                                                className="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300"
                                                onClick={() => setShowEditModal(false)}
                                            >
                                                取消
                                            </button>
                                            <button 
                                                className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
                                                onClick={() => setShowEditModal(false)}
                                            >
                                                保存修改
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Delete Confirmation Modal */}
                    {showDeleteModal && currentEntry && (
                        <div className="fixed inset-0 flex items-center justify-center z-50 modal-backdrop">
                            <div className="bg-white rounded-lg w-96">
                                <div className="p-6">
                                    <div className="flex justify-center mb-4 text-red-500">
                                        <i className="fas fa-exclamation-triangle text-4xl"></i>
                                    </div>
                                    <h2 className="text-xl font-bold text-center">确认删除</h2>
                                    <p className="text-center mt-2">
                                        是否删除 "{currentEntry.name}" 这条植物日记？此操作不可恢复。
                                    </p>
                                    <div className="flex justify-center space-x-4 mt-6">
                                        <button 
                                            className="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300"
                                            onClick={() => setShowDeleteModal(false)}
                                        >
                                            取消
                                        </button>
                                        <button 
                                            className="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"
                                            onClick={confirmDelete}
                                        >
                                            确认删除
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Add New Entry Modal */}
                    {showAddModal && (
                        <div className="fixed inset-0 flex items-center justify-center z-50 modal-backdrop">
                            <div className="bg-white rounded-lg w-2/5 max-h-90vh overflow-auto">
                                <div className="p-6">
                                    <div className="flex justify-between items-center mb-4">
                                        <h2 className="text-xl font-bold">添加新植物日记</h2>
                                        <button onClick={() => setShowAddModal(false)} className="text-gray-500 hover:text-gray-700">
                                            <i className="fas fa-times"></i>
                                        </button>
                                    </div>

                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">日期</label>
                                            <input 
                                                type="date" 
                                                className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500"
                                                value="2025-09-23" 
                                                readOnly
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">植物名称</label>
                                            <input 
                                                type="text" 
                                                className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500" 
                                                placeholder="例如: 玉兰花、银杏、蒲公英等"
                                                value="玉兰花、银杏、蒲公英等"
                                                readOnly
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">识别结果</label>
                                            <select 
                                                className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500"
                                            >
                                                <option>高可视</option>
                                            </select>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">分类</label>
                                            <div className="flex space-x-4">
                                                <label className="flex items-center">
                                                    <input 
                                                        type="radio" 
                                                        name="category" 
                                                        value="树木" 
                                                        className="mr-1" 
                                                    />
                                                    树木
                                                </label>
                                                <label className="flex items-center">
                                                    <input 
                                                        type="radio" 
                                                        name="category" 
                                                        value="花卉" 
                                                        className="mr-1"
                                                        checked={true}
                                                        readOnly
                                                    />
                                                    花卉
                                                </label>
                                                <label className="flex items-center">
                                                    <input 
                                                        type="radio" 
                                                        name="category" 
                                                        value="草本" 
                                                        className="mr-1" 
                                                    />
                                                    草本
                                                </label>
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">笔记</label>
                                            <textarea 
                                                className="w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500 h-24"
                                                placeholder="记录你对这种植物的观察或感想..."
                                                value="记录你对这种植物的观察或感想..."
                                                readOnly
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-1">图片</label>
                                            <div className="border rounded-md p-2">
                                                <img 
                                                    src="https://picsum.photos/id/152/800/600" 
                                                    alt="Plant preview" 
                                                    className="w-full h-48 object-contain" 
                                                />
                                                <div className="flex justify-center mt-2">
                                                    <button className="text-blue-500 text-sm flex items-center">
                                                        <i className="fas fa-camera mr-1"></i> 添加图片
                                                    </button>
                                                </div>
                                                <div className="text-xs text-gray-500 text-center mt-1">
                                                    (此处提示上传照片，支持常见格式)
                                                </div>
                                            </div>
                                        </div>

                                        <div className="flex justify-end space-x-2 pt-4">
                                            <button 
                                                className="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300"
                                                onClick={() => setShowAddModal(false)}
                                            >
                                                取消
                                            </button>
                                            <button 
                                                className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
                                                onClick={() => setShowAddModal(false)}
                                            >
                                                保存
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Action Buttons */}
                    <div className="fixed bottom-6 right-6 flex space-x-4">
                        <button 
                            className="bg-green-600 text-white px-4 py-2 rounded-md shadow-md hover:bg-green-700 flex items-center"
                            onClick={handleAddNew}
                        >
                            <i className="fas fa-plus mr-1"></i> 添加新条目
                        </button>
                        <button className="bg-blue-600 text-white px-4 py-2 rounded-md shadow-md hover:bg-blue-700 flex items-center">
                            <i className="fas fa-file-import mr-1"></i> 导出日记
                        </button>
                        <button className="bg-red-600 text-white px-4 py-2 rounded-md shadow-md hover:bg-red-700 flex items-center">
                            <i className="fas fa-trash-alt mr-1"></i> 清空所有
                        </button>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById("root"));
    </script>
</body>
</html>