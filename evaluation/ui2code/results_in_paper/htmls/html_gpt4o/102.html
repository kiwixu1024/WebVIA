<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <title>家庭理财计划</title>
</head>
<body class="bg-gray-100">
  <div id="app"></div>
  <script type="text/babel">
    const App = () => {
      const [modalVisible, setModalVisible] = React.useState(false);
      const [editMode, setEditMode] = React.useState(false);
      const [formData, setFormData] = React.useState({
        date: '',
        category: '',
        amount: '',
        remark: '',
      });

      const openModal = (isEdit = false, data = {}) => {
        setEditMode(isEdit);
        if (isEdit) {
          setFormData(data);
        } else {
          setFormData({ date: '', category: '', amount: '', remark: '' });
        }
        setModalVisible(true);
      };

      const closeModal = () => setModalVisible(false);

      const handleChange = (e) => {
        const { name, value } = e.target;
        setFormData((prev) => ({ ...prev, [name]: value }));
      };

      const saveRecord = () => {
        console.log('Saved data:', formData);
        closeModal();
      };

      const tableData = [
        { date: '2023-10-15', category: '餐饮', amount: -200, remark: '家庭聚餐' },
        { date: '2023-10-10', category: '交通', amount: -50, remark: '地铁月票' },
        { date: '2023-10-05', category: '收入', amount: 10000, remark: '工资' },
        { date: '2023-10-03', category: '购物', amount: -1500, remark: '生活用品' },
        { date: '2023-09-28', category: '家庭支出', amount: -2000, remark: '水电费' },
        { date: '2025-09-23', category: '收入', amount: 100, remark: '测试账单' }
      ];

      return (
        <div>
          <div className="bg-blue-500 text-white p-4">
            <h1 className="text-lg font-bold">家庭理财计划</h1>
          </div>
          <div className="p-6 bg-white rounded-lg shadow-lg max-w-7xl mx-auto">
            <div className="flex justify-between items-center mb-4">
              <h2 className="text-lg font-bold">账单记录</h2>
              <button
                className="bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-400"
                onClick={() => openModal()}
              >
                添加账单
              </button>
            </div>
            <table className="w-full table-auto border-collapse bg-gray-100">
              <thead className="bg-gray-200">
                <tr>
                  <th className="border p-2">日期</th>
                  <th className="border p-2">类别</th>
                  <th className="border p-2">金额</th>
                  <th className="border p-2">备注</th>
                  <th className="border p-2">操作</th>
                </tr>
              </thead>
              <tbody>
                {tableData.map((item, index) => (
                  <tr key={index} className="border">
                    <td className="border p-2">{item.date}</td>
                    <td className="border p-2">{item.category}</td>
                    <td className={`border p-2 ${item.amount < 0 ? 'text-red-500' : 'text-green-500'}`}>{item.amount}</td>
                    <td className="border p-2">{item.remark}</td>
                    <td className="border p-2">
                      <button
                        className="text-blue-500 underline mr-2"
                        onClick={() => openModal(true, item)}
                      >
                        编辑
                      </button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          {modalVisible && (
            <div>
              <div className="fixed inset-0 bg-black bg-opacity-50"></div>
              <div className="fixed inset-0 flex items-center justify-center">
                <div className="bg-white p-6 rounded-lg shadow-lg relative">
                  <h3 className="text-lg font-bold mb-4">
                    {editMode ? '编辑账单记录' : '添加账单记录'}
                  </h3>
                  <div className="space-y-4">
                    <div>
                      <label className="block mb-2">日期</label>
                      <input
                        type="date"
                        name="date"
                        value={formData.date}
                        onChange={handleChange}
                        className="w-full border border-gray-300 rounded p-2"
                      />
                    </div>
                    <div>
                      <label className="block mb-2">类别</label>
                      <select
                        name="category"
                        value={formData.category}
                        onChange={handleChange}
                        className="w-full border border-gray-300 rounded p-2"
                      >
                        <option value="">选择类别</option>
                        <option value="餐饮">餐饮</option>
                        <option value="交通">交通</option>
                        <option value="收入">收入</option>
                        <option value="购物">购物</option>
                        <option value="家庭支出">家庭支出</option>
                      </select>
                    </div>
                    <div>
                      <label className="block mb-2">金额 (¥)</label>
                      <input
                        type="number"
                        name="amount"
                        value={formData.amount}
                        onChange={handleChange}
                        className="w-full border border-gray-300 rounded p-2"
                        placeholder="收入为正数，支出为负数"
                      />
                    </div>
                    <div>
                      <label className="block mb-2">备注</label>
                      <input
                        type="text"
                        name="remark"
                        value={formData.remark}
                        onChange={handleChange}
                        className="w-full border border-gray-300 rounded p-2"
                        placeholder="账单备注"
                      />
                    </div>
                  </div>
                  <div className="mt-6 flex justify-end space-x-4">
                    <button
                      className="bg-gray-300 px-4 py-2 rounded-lg"
                      onClick={closeModal}
                    >
                      取消
                    </button>
                    <button
                      className="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-400"
                      onClick={saveRecord}
                    >
                      保存
                    </button>
                  </div>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    };

    ReactDOM.render(<App />, document.getElementById('app'));
  </script>
</body>
</html>