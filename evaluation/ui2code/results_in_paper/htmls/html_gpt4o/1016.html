<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>求职跟踪系统</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
  </head>
  <body class="bg-gray-100">
    <div id="root"></div>
    <script type="text/babel">
      const App = () => {
        const [searchValue, setSearchValue] = React.useState("");
        const [modalType, setModalType] = React.useState(null);
        const [deleteTarget, setDeleteTarget] = React.useState(null);

        const applications = [
          {
            id: 1,
            company: "腾讯",
            position: "前端开发工程师",
            date: "2024-05-10",
            status: "已投递",
            image: "https://picsum.photos/id/1010/50/50",
          },
          {
            id: 2,
            company: "阿里巴巴",
            position: "UI设计师",
            date: "2024-05-08",
            status: "面试中",
            image: "https://picsum.photos/id/1011/50/50",
          },
          {
            id: 3,
            company: "字节跳动",
            position: "后端工程师",
            date: "2024-05-05",
            status: "已投递",
            image: "https://picsum.photos/id/1012/50/50",
          },
          {
            id: 4,
            company: "百度",
            position: "产品经理",
            date: "2024-05-01",
            status: "已录用",
            image: "https://picsum.photos/id/1013/50/50",
          },
        ];

        const handleSearch = (e) => {
          setSearchValue(e.target.value);
        };

        const handleModalOpen = (type, target = null) => {
          setModalType(type);
          setDeleteTarget(target);
        };

        const handleModalClose = () => {
          setModalType(null);
          setDeleteTarget(null);
        };

        const filteredApplications = applications.filter(
          (app) =>
            app.position.toLowerCase().includes(searchValue.toLowerCase()) ||
            app.company.toLowerCase().includes(searchValue.toLowerCase())
        );

        return (
          <div className="min-h-screen flex">
            {/* Sidebar */}
            <aside className="w-60 bg-blue-600 text-white flex flex-col">
              <div className="px-8 py-4 text-xl font-bold">
                求职跟踪
              </div>
              <nav className="px-4 flex-grow">
                <ul className="space-y-4">
                  <li className="font-semibold">概览</li>
                  <li className="font-semibold">职位列表</li>
                  <li className="font-semibold">统计报表</li>
                  <li>帮助说明</li>
                </ul>
              </nav>
            </aside>

            {/* Main Content */}
            <main className="flex-grow p-6">
              <div className="flex justify-between items-center">
                <h1 className="text-xl font-bold">职位列表</h1>
                <button
                  className="px-4 py-2 bg-blue-500 text-white rounded"
                  onClick={() => handleModalOpen("add")}
                >
                  + 添加申请
                </button>
              </div>

              <div className="flex items-center bg-white rounded mt-4 px-4 py-2 shadow">
                <input
                  type="text"
                  placeholder="搜索职位或公司..."
                  className="flex-grow mr-2"
                  value={searchValue}
                  onChange={handleSearch}
                />
                <i className="fas fa-search text-gray-500"></i>
              </div>

              <div className="bg-white rounded mt-4 p-4 shadow">
                {filteredApplications.map((app) => (
                  <div key={app.id} className="flex items-center justify-between py-2 border-b">
                    <div className="flex items-center">
                      <img src={app.image} alt="" className="rounded mr-4" />
                      <div>
                        <h2 className="text-lg">{app.position}</h2>
                        <p className="text-gray-500">
                          {app.company} | {app.date}
                          <span
                            className={
                              app.status === "已投递"
                                ? "ml-2 px-2 bg-green-200 text-green-800 rounded"
                                : app.status === "面试中"
                                ? "ml-2 px-2 bg-purple-200 text-purple-800 rounded"
                                : "ml-2 px-2 bg-yellow-200 text-yellow-800 rounded"
                            }
                          >
                            {app.status}
                          </span>
                        </p>
                      </div>
                    </div>
                    <div className="flex space-x-2">
                      <button
                        className="px-2 py-1 bg-gray-300 rounded"
                        onClick={() => handleModalOpen("edit", app)}
                      >
                        编辑
                      </button>
                      <button
                        className="px-2 py-1 bg-red-500 text-white rounded"
                        onClick={() => handleModalOpen("delete", app)}
                      >
                        删除
                      </button>
                    </div>
                  </div>
                ))}
              </div>

              {/* Modal Logic */}
              {modalType && (
                <div className="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center">
                  <div className="bg-white rounded p-6 w-96 shadow-lg">
                    {modalType === "add" && (
                      <div>
                        <h2 className="text-xl font-bold mb-4">添加职位申请</h2>
                        <div>
                          <label className="block mb-2">公司名称</label>
                          <input
                            type="text"
                            className="w-full border border-gray-300 rounded px-2 py-1"
                          />
                        </div>
                        <div className="mt-4">
                          <label className="block mb-2">职位名称</label>
                          <input
                            type="text"
                            className="w-full border border-gray-300 rounded px-2 py-1"
                          />
                        </div>
                        <div className="mt-4">
                          <label className="block mb-2">投递日期</label>
                          <input
                            type="date"
                            className="w-full border border-gray-300 rounded px-2 py-1"
                          />
                        </div>
                        <div className="mt-4">
                          <label className="block mb-2">申请阶段</label>
                          <select className="w-full border border-gray-300 rounded px-2 py-1">
                            <option>已投递</option>
                            <option>面试中</option>
                            <option>已录用</option>
                          </select>
                        </div>
                        <div className="flex justify-end items-center mt-4">
                          <button
                            className="px-4 py-2 bg-gray-300 rounded mr-2"
                            onClick={handleModalClose}
                          >
                            取消
                          </button>
                          <button
                            className="px-4 py-2 bg-blue-500 text-white rounded"
                            onClick={handleModalClose}
                          >
                            保存
                          </button>
                        </div>
                      </div>
                    )}
                    {modalType === "edit" && deleteTarget && (
                      <div>
                        <h2 className="text-xl font-bold mb-4">编辑职位申请</h2>
                        <div>
                          <label className="block mb-2">公司名称</label>
                          <input
                            type="text"
                            className="w-full border border-gray-300 rounded px-2 py-1"
                            value={deleteTarget.company}
                          />
                        </div>
                        <div className="mt-4">
                          <label className="block mb-2">职位名称</label>
                          <input
                            type="text"
                            className="w-full border border-gray-300 rounded px-2 py-1"
                            value={deleteTarget.position}
                          />
                        </div>
                        <div className="mt-4">
                          <label className="block mb-2">投递日期</label>
                          <input
                            type="date"
                            className="w-full border border-gray-300 rounded px-2 py-1"
                            value={deleteTarget.date}
                          />
                        </div>
                        <div className="mt-4">
                          <label className="block mb-2">申请阶段</label>
                          <select className="w-full border border-gray-300 rounded px-2 py-1">
                            <option value="已投递">已投递</option>
                            <option value="面试中">面试中</option>
                            <option value="已录用">已录用</option>
                          </select>
                        </div>
                        <div className="flex justify-end items-center mt-4">
                          <button
                            className="px-4 py-2 bg-gray-300 rounded mr-2"
                            onClick={handleModalClose}
                          >
                            取消
                          </button>
                          <button
                            className="px-4 py-2 bg-blue-500 text-white rounded"
                            onClick={handleModalClose}
                          >
                            更新
                          </button>
                        </div>
                      </div>
                    )}
                    {modalType === "delete" && deleteTarget && (
                      <div>
                        <h2 className="text-xl font-bold mb-4 text-red-500">
                          确认删除
                        </h2>
                        <p className="mb-4">
                          您确定要删除{" "}
                          <strong>{deleteTarget.company} - {deleteTarget.position}</strong> 的申请记录吗？此操作无法撤销。
                        </p>
                        <div className="flex justify-end items-center">
                          <button
                            className="px-4 py-2 bg-gray-300 rounded mr-2"
                            onClick={handleModalClose}
                          >
                            取消
                          </button>
                          <button
                            className="px-4 py-2 bg-red-500 text-white rounded"
                            onClick={handleModalClose}
                          >
                            确认删除
                          </button>
                        </div>
                      </div>
                    )}
                  </div>
                </div>
              )}
            </main>
          </div>
        );
      };

      ReactDOM.render(<App />, document.getElementById("root"));
    </script>
  </body>
</html>