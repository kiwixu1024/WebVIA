<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>在线英语背单词</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>

<body class="bg-gray-100">
    <div id="root"></div>
    <script type="text/babel">
        const App = () => {
            const [filter, setFilter] = React.useState({ progress: "All", difficulty: "All" });
            const [modalOpen, setModalOpen] = React.useState(false);
            const [wordList, setWordList] = React.useState([
                { id: 1, imageUrl: "https://picsum.photos/id/101/400/200", word: "apple", meaning: "苹果", difficulty: "Easy", learned: true },
                { id: 2, imageUrl: "https://picsum.photos/id/102/400/200", word: "journey", meaning: "旅程", difficulty: "Medium", learned: false },
                { id: 3, imageUrl: "https://picsum.photos/id/103/400/200", word: "meticulous", meaning: "一丝不苟的", difficulty: "Hard", learned: false },
            ]);

            const handleFilterChange = (type, value) => {
                setFilter({ ...filter, [type]: value });
            };

            const handleAddWord = (newWord) => {
                setWordList([...wordList, newWord]);
                setModalOpen(false);
            };

            const filteredWords = wordList.filter(word =>
                (filter.progress === "All" || (filter.progress === "已学" ? word.learned : !word.learned)) &&
                (filter.difficulty === "All" || word.difficulty === filter.difficulty)
            );

            return (
                <div class="container mx-auto p-4 bg-white shadow-md rounded-md">
                    <header class="flex justify-between items-center">
                        <h1 class="text-xl font-semibold text-blue-600">在线英语背单词</h1>
                        <button
                            class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"
                            onClick={() => setModalOpen(true)}
                        >
                            + 添加单词
                        </button>
                    </header>
                    <main class="mt-4">
                        <section class="flex justify-between items-center mb-4">
                            <div class="flex items-center space-x-4">
                                <label class="text-gray-700 font-medium">筛选：</label>
                                <select
                                    class="border border-gray-300 rounded px-4 py-2"
                                    value={filter.progress}
                                    onChange={(e) => handleFilterChange("progress", e.target.value)}
                                >
                                    <option value="All">所有</option>
                                    <option value="已学">已学</option>
                                    <option value="未学习">未学习</option>
                                </select>
                                <select
                                    class="border border-gray-300 rounded px-4 py-2"
                                    value={filter.difficulty}
                                    onChange={(e) => handleFilterChange("difficulty", e.target.value)}
                                >
                                    <option value="All">难度</option>
                                    <option value="Easy">Easy</option>
                                    <option value="Medium">Medium</option>
                                    <option value="Hard">Hard</option>
                                </select>
                            </div>
                        </section>
                        <section class="grid grid-cols-3 gap-4">
                            {filteredWords.map(word => (
                                <div key={word.id} class="border rounded-lg p-4 shadow-sm bg-white">
                                    <img src={word.imageUrl} class="rounded-t-md" />
                                    <div class="mt-2">
                                        <h3 class="text-lg font-bold">{word.word}</h3>
                                        <p class="text-gray-600">{word.meaning}</p>
                                        <span
                                            class={`inline-block px-2 py-1 rounded text-sm text-white ${
                                                word.difficulty === "Easy" ? "bg-green-500" 
                                                : word.difficulty === "Medium" ? "bg-yellow-500" 
                                                : "bg-red-500"
                                            }`}
                                        >
                                            {word.difficulty}
                                        </span>
                                    </div>
                                </div>
                            ))}
                        </section>
                    </main>
                    {/* Modal for adding a new word */}
                    {modalOpen && (
                        <div class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center">
                            <div class="bg-white rounded-lg p-6 shadow-md w-1/3">
                                <header class="mb-4">
                                    <h2 class="text-xl font-bold">添加新单词</h2>
                                </header>
                                <form
                                    onSubmit={(e) => {
                                        e.preventDefault();
                                        const formData = new FormData(e.target);
                                        handleAddWord({
                                            id: Date.now(),
                                            imageUrl: "https://picsum.photos/id/104/400/200",
                                            word: formData.get("word"),
                                            meaning: formData.get("meaning"),
                                            difficulty: formData.get("difficulty"),
                                            learned: formData.has("learned"),
                                        });
                                    }}
                                >
                                    <div class="mb-4">
                                        <label class="block text-gray-700">英文单词</label>
                                        <input name="word" class="border border-gray-300 rounded px-4 py-2 w-full" required />
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700">中文释义</label>
                                        <input name="meaning" class="border border-gray-300 rounded px-4 py-2 w-full" required />
                                    </div>
                                    <div class="mb-4">
                                        <label class="block text-gray-700">难度</label>
                                        <select name="difficulty" class="border border-gray-300 rounded px-4 py-2 w-full">
                                            <option value="Easy">Easy</option>
                                            <option value="Medium">Medium</option>
                                            <option value="Hard">Hard</option>
                                        </select>
                                    </div>
                                    <div class="mb-4 flex items-center">
                                        <input name="learned" type="checkbox" class="mr-2" />
                                        <label class="text-gray-700">标记为已学习</label>
                                    </div>
                                    <div class="flex justify-end space-x-2">
                                        <button
                                            type="button"
                                            class="px-4 py-2 bg-gray-300 text-gray-800 rounded"
                                            onClick={() => setModalOpen(false)}
                                        >
                                            取消
                                        </button>
                                        <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded">
                                            保存
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById("root"));
    </script>
</body>

</html>