<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>家庭理财计划</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
  <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
  <style>
    body {
      font-family: 'Noto Sans SC', sans-serif;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&display=swap" rel="stylesheet">
</head>
<body class="h-screen flex overflow-hidden bg-gray-100">
  <div id="root" class="flex-1 flex flex-col"></div>
  <script type="text/babel">
    const { useState } = React;

    function App() {
      // 初始账单记录
      const initialRecords = [
        { date: '2023-10-15', type: '餐饮', amount: -200, remark: '家庭聚餐' },
        { date: '2023-10-10', type: '交通', amount: -50, remark: '地铁月票' },
        { date: '2023-10-05', type: '收入', amount: 10000, remark: '工资' },
        { date: '2023-10-03', type: '购物', amount: -1500, remark: '生活用品' },
        { date: '2023-09-28', type: '家庭支出', amount: -2000, remark: '水电费' },
      ];
      const [records, setRecords] = useState(initialRecords);
      const [showModal, setShowModal] = useState(false);
      const [modalMode, setModalMode] = useState('add'); // 'add' or 'edit'
      const [currentIndex, setCurrentIndex] = useState(null);
      const [form, setForm] = useState({
        date: '',
        type: '',
        amount: '',
        remark: ''
      });

      // 打开新增账单
      const openAdd = () => {
        setModalMode('add');
        setForm({ date: '', type: '', amount: '', remark: '' });
        setShowModal(true);
      };
      // 打开编辑
      const openEdit = (rec, idx) => {
        setModalMode('edit');
        setCurrentIndex(idx);
        setForm({
          date: rec.date,
          type: rec.type,
          amount: rec.amount.toString(),
          remark: rec.remark
        });
        setShowModal(true);
      };
      // 保存
      const save = () => {
        const newRec = {
          date: form.date,
          type: form.type,
          amount: parseFloat(form.amount),
          remark: form.remark
        };
        if (modalMode === 'add') {
          setRecords([...records, newRec]);
        } else if (modalMode === 'edit') {
          const updated = [...records];
          updated[currentIndex] = newRec;
          setRecords(updated);
        }
        setShowModal(false);
      };
      // 取消
      const cancel = () => {
        setShowModal(false);
      };

      return (
        <div className="flex h-full">
          {/* 侧边栏 */}
          <aside className="w-64 bg-white border-r border-gray-200 flex flex-col">
            <div className="h-16 flex items-center px-6 bg-blue-600 text-white text-lg font-semibold">
              <i className="fas fa-home mr-2"></i>家庭理财计划
            </div>
            <nav className="flex-1 p-4 space-y-2 text-gray-700 text-sm">
              <div className="flex items-center p-2 rounded hover:bg-gray-100 cursor-pointer">
                <i className="fas fa-file-alt w-5"></i>
                <span className="ml-2">预算模板</span>
              </div>
              <div className="flex items-center p-2 rounded bg-gray-100 font-medium cursor-pointer">
                <i className="fas fa-book w-5"></i>
                <span className="ml-2">账单记录</span>
              </div>
              <div className="flex items-center p-2 rounded hover:bg-gray-100 cursor-pointer">
                <i className="fas fa-chart-pie w-5"></i>
                <span className="ml-2">资产负债</span>
              </div>
            </nav>
            <div className="p-4 text-xs text-gray-500 border-t border-gray-200">
              理财小助手<br />
              您的月消费已使用80%，请控制支出。
            </div>
          </aside>

          {/* 主区域 */}
          <div className="flex-1 flex flex-col overflow-auto">
            {/* 顶部 */}
            <header className="h-16 flex items-center px-8 bg-gradient-to-r from-blue-600 to-orange-400 text-white">
              <div>
                <div className="text-2xl font-semibold">家庭理财计划</div>
                <div className="text-sm">可视化家庭理财一站式管理 · 实时数据统计与可定制预算 · 安全便捷，支持多端同步</div>
              </div>
            </header>

            {/* 内容 */}
            <main className="p-6 space-y-6">
              {/* 标签 + 操作按钮 */}
              <div className="flex items-center justify-between">
                <div className="space-x-4 text-gray-600 text-sm">
                  <button className="px-3 py-1 rounded text-orange-600 font-medium bg-orange-100">总览</button>
                  <button className="px-3 py-1 rounded hover:bg-gray-100">收入</button>
                  <button className="px-3 py-1 rounded hover:bg-gray-100">支出</button>
                  <button className="px-3 py-1 rounded hover:bg-gray-100">储蓄</button>
                  <button className="px-3 py-1 rounded hover:bg-gray-100">投资</button>
                </div>
                <div className="space-x-3">
                  <button className="px-4 py-2 bg-white border border-orange-400 text-orange-600 rounded hover:bg-orange-50">添加目标</button>
                  <button onClick={openAdd} className="px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600">新增账单</button>
                  <button className="px-4 py-2 bg-white border border-orange-400 text-orange-600 rounded hover:bg-orange-50">添加理财产品</button>
                </div>
              </div>

              {/* 表格+图表 */}
              <div className="flex space-x-6">
                <div className="flex-1 bg-white rounded shadow overflow-auto">
                  <table className="min-w-full text-sm">
                    <thead className="bg-gray-50 text-gray-600">
                      <tr>
                        <th className="px-4 py-3 text-left">日期</th>
                        <th className="px-4 py-3 text-left">类型</th>
                        <th className="px-4 py-3 text-left">金额</th>
                        <th className="px-4 py-3 text-left">备注</th>
                        <th className="px-4 py-3"></th>
                      </tr>
                    </thead>
                    <tbody className="text-gray-700">
                      {records.map((r, idx) => (
                        <tr key={idx} className="border-b last:border-0">
                          <td className="px-4 py-3">{r.date}</td>
                          <td className="px-4 py-3">{r.type}</td>
                          <td className={`px-4 py-3 ${r.amount>=0?'text-green-500':'text-red-500'}`}>{r.amount>=0?`+${r.amount}`:`${r.amount}`}</td>
                          <td className="px-4 py-3">{r.remark}</td>
                          <td className="px-4 py-3 space-x-2">
                            <i onClick={()=>openEdit(r, idx)} className="far fa-edit text-orange-500 cursor-pointer"></i>
                            <i onClick={()=>{
                              const a=records.filter((_,i)=>i!==idx);
                              setRecords(a);
                            }} className="far fa-trash-alt text-red-500 cursor-pointer"></i>
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
                <div className="w-64 bg-white rounded shadow p-3 flex-shrink-0">
                  <img src="https://picsum.photos/id/1015/300/180" alt="chart" className="object-cover w-full h-40 rounded"/>
                </div>
              </div>

              {/* 推荐理财产品 */}
              <div className="bg-white rounded shadow p-6">
                <div className="text-gray-700 font-medium mb-4">推荐理财产品</div>
                <div className="grid grid-cols-3 gap-4">
                  <div className="p-4 border rounded flex flex-col">
                    <img src="https://picsum.photos/id/1025/80/80" alt="" className="w-20 h-20 mb-3"/>
                    <div className="font-semibold">余额宝</div>
                    <div className="text-xs text-gray-500">预期收益：2.5% | 风险：低</div>
                    <div className="mt-auto text-blue-500 text-xs cursor-pointer">查看详情 ></div>
                  </div>
                  <div className="p-4 border rounded flex flex-col">
                    <img src="https://picsum.photos/id/1024/80/80" alt="" className="w-20 h-20 mb-3"/>
                    <div className="font-semibold">指数基金</div>
                    <div className="text-xs text-gray-500">预期收益：8.0% | 风险：中</div>
                    <div className="mt-auto text-blue-500 text-xs cursor-pointer">查看详情 ></div>
                  </div>
                  <div className="p-4 border rounded flex flex-col">
                    <img src="https://picsum.photos/id/1026/80/80" alt="" className="w-20 h-20 mb-3"/>
                    <div className="font-semibold">定期存款</div>
                    <div className="text-xs text-gray-500">预期收益：3.5% | 风险：低</div>
                    <div className="mt-auto text-blue-500 text-xs cursor-pointer">查看详情 ></div>
                  </div>
                </div>
              </div>

              {/* 操作指引 */}
              <div className="bg-white rounded shadow p-6 grid grid-cols-3 text-center text-gray-600">
                <div className="space-y-2">
                  <div className="mx-auto w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-blue-500"><i className="fas fa-plus"></i></div>
                  <div className="font-medium">添加记录</div>
                  <div className="text-xs">点击顶部“新增账单”按钮，填写相关信息并保存。</div>
                </div>
                <div className="space-y-2">
                  <div className="mx-auto w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-orange-500"><i className="fas fa-edit"></i></div>
                  <div className="font-medium">编辑记录</div>
                  <div className="text-xs">点击记录右上的编辑图标，修改信息后保存。</div>
                </div>
                <div className="space-y-2">
                  <div className="mx-auto w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center text-red-500"><i className="fas fa-trash-alt"></i></div>
                  <div className="font-medium">删除记录</div>
                  <div className="text-xs">点击记录右上的删除图标，确认后即可删除记录。</div>
                </div>
              </div>

              {/* Footer */}
              <div className="text-center text-gray-400 text-xs">
                © 2023 家庭理财计划 版权所有 · 帮助中心 · 联系我们 · 隐私政策
              </div>
            </main>
          </div>

          {/* 弹窗 */}
          {showModal && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
              <div className="bg-white rounded-lg w-96 p-6 relative">
                <div className="flex justify-between items-center mb-4">
                  <div className="text-lg font-medium">{modalMode === 'add' ? '添加账单记录' : '编辑账单记录'}</div>
                  <i onClick={cancel} className="fas fa-times cursor-pointer text-gray-500"></i>
                </div>
                <div className="space-y-4 text-gray-700">
                  <div>
                    <label className="block mb-1">日期</label>
                    <input
                      type="date"
                      value={form.date}
                      onChange={e => setForm({ ...form, date: e.target.value })}
                      className="w-full border border-gray-300 rounded px-3 py-2"
                    />
                  </div>
                  <div>
                    <label className="block mb-1">类别</label>
                    <select
                      value={form.type}
                      onChange={e => setForm({ ...form, type: e.target.value })}
                      className="w-full border border-gray-300 rounded px-3 py-2 bg-white"
                    >
                      <option value="">选择类别</option>
                      <option value="收入">收入</option>
                      <option value="餐饮">餐饮</option>
                      <option value="交通">交通</option>
                      <option value="购物">购物</option>
                      <option value="家庭支出">家庭支出</option>
                    </select>
                  </div>
                  <div>
                    <label className="block mb-1">金额（¥）</label>
                    <input
                      type="number"
                      placeholder="收入为正数，支出为负数"
                      value={form.amount}
                      onChange={e => setForm({ ...form, amount: e.target.value })}
                      className="w-full border border-gray-300 rounded px-3 py-2"
                    />
                  </div>
                  <div>
                    <label className="block mb-1">备注</label>
                    <input
                      type="text"
                      placeholder="账单备注"
                      value={form.remark}
                      onChange={e => setForm({ ...form, remark: e.target.value })}
                      className="w-full border border-gray-300 rounded px-3 py-2"
                    />
                  </div>
                </div>
                <div className="mt-6 flex justify-end space-x-3">
                  <button onClick={cancel} className="px-4 py-2 border border-gray-300 rounded text-gray-600 hover:bg-gray-50">取消</button>
                  <button onClick={save} className="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">保存</button>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>