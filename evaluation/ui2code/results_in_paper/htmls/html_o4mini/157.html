<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>班级点名系统</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="h-screen overflow-hidden">
  <div id="root" class="h-full"></div>
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    function App() {
      const [students, setStudents] = useState([
        { id: '001', name: '张三', cls: '一班', status: '正常' },
        { id: '002', name: '李四', cls: '一班', status: '正常' },
        { id: '003', name: '王五', cls: '一班', status: '请假' },
        { id: '004', name: '赵六', cls: '二班', status: '正常' },
        { id: '005', name: '钱七', cls: '二班', status: '迟到' },
      ]);
      const [modalOpen, setModalOpen] = useState(false);
      const [newStu, setNewStu] = useState({ id: '', name: '', cls: '', status: '正常' });
      const donutRef = useRef(null);
      const lineRef = useRef(null);

      useEffect(() => {
        // 饼图
        if (donutRef.current) {
          new Chart(donutRef.current, {
            type: 'doughnut',
            data: {
              labels: ['出勤', '缺勤'],
              datasets: [{
                data: [90, 10],
                backgroundColor: ['#34D399', '#EF4444']
              }]
            },
            options: {
              cutout: '70%',
              plugins: {
                legend: { display: false },
              }
            }
          });
        }
        // 折线图
        if (lineRef.current) {
          new Chart(lineRef.current, {
            type: 'line',
            data: {
              labels: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
              datasets: [{
                data: [50, 48, 52, 55, 40, 30, 0],
                borderColor: '#3B82F6',
                backgroundColor: 'rgba(59,130,246,0.2)',
                tension: 0.3,
                fill: true,
              }]
            },
            options: {
              plugins: { legend: { display: false } },
              scales: {
                x: { grid: { display: false } },
                y: { grid: { color: '#E5E7EB' }, beginAtZero: true }
              }
            }
          });
        }
      }, []);

      const openModal = () => {
        setNewStu({ id: '', name: '', cls: '', status: '正常' });
        setModalOpen(true);
      };
      const closeModal = () => setModalOpen(false);
      const handleAdd = () => {
        if (newStu.id.trim() && newStu.name.trim() && newStu.cls.trim()) {
          setStudents([...students, { ...newStu }]);
          closeModal();
        }
      };

      return (
        <div className="flex h-full">
          {/* 侧边栏 */}
          <aside className="w-64 bg-blue-600 text-white flex flex-col">
            <div className="p-4 text-xl font-bold">班级点名系统</div>
            <nav className="flex-1">
              <ul>
                <li className="p-4 bg-blue-700">学生管理</li>
                <li className="p-4 hover:bg-blue-700 cursor-pointer">公告管理</li>
                <li className="p-4 hover:bg-blue-700 cursor-pointer">点名记录</li>
                <li className="p-4 hover:bg-blue-700 cursor-pointer">系统设置</li>
              </ul>
            </nav>
          </aside>
          {/* 主区域 */}
          <div className="flex-1 flex flex-col overflow-auto">
            {/* 顶部标签 */}
            <header className="bg-white border-b">
              <div className="container mx-auto px-4 h-12 flex items-center">
                <ul className="flex space-x-6 text-gray-600">
                  <li className="pb-2 border-b-2 border-blue-600 text-blue-600">日常点名</li>
                  <li>周报统计</li>
                  <li>导出记录</li>
                </ul>
              </div>
            </header>
            {/* 内容 */}
            <div className="container mx-auto px-4 py-4 flex space-x-4">
              {/* 学生管理区 */}
              <div className="flex-1 bg-white p-4 rounded shadow">
                <div className="flex justify-between items-center mb-4">
                  <div>
                    <h2 className="text-lg font-semibold">学生管理</h2>
                    <p className="text-sm text-gray-500">在此管理全班学生信息，可新增、编辑或删除学生记录</p>
                  </div>
                  <button onClick={openModal} className="bg-blue-600 text-white px-4 py-1 rounded flex items-center">
                    <i className="fas fa-plus mr-1"></i>添加学生
                  </button>
                </div>
                <table className="min-w-full border">
                  <thead>
                    <tr className="bg-gray-100">
                      <th className="p-2 text-left text-sm text-gray-600 cursor-pointer">学号</th>
                      <th className="p-2 text-left text-sm text-gray-600 cursor-pointer">姓名</th>
                      <th className="p-2 text-left text-sm text-gray-600 cursor-pointer">班级</th>
                      <th className="p-2 text-left text-sm text-gray-600 cursor-pointer">状态</th>
                      <th className="p-2 text-left text-sm text-gray-600">操作</th>
                    </tr>
                  </thead>
                  <tbody>
                    {students.map((s, idx) => (
                      <tr key={idx} className="border-t">
                        <td className="p-2 text-sm text-gray-700">{s.id}</td>
                        <td className="p-2 text-sm text-gray-700">{s.name}</td>
                        <td className="p-2 text-sm text-gray-700">{s.cls}</td>
                        <td className="p-2 text-sm">
                          {s.status === '正常' && <span className="px-2 py-0.5 bg-green-100 text-green-600 rounded-full text-xs">正常</span>}
                          {s.status === '请假' && <span className="px-2 py-0.5 bg-yellow-100 text-yellow-600 rounded-full text-xs">请假</span>}
                          {s.status === '迟到' && <span className="px-2 py-0.5 bg-red-100 text-red-600 rounded-full text-xs">迟到</span>}
                        </td>
                        <td className="p-2 text-sm">
                          <button className="text-blue-600 hover:underline mr-2"><i className="fas fa-edit"></i> 编辑</button>
                          <button className="text-red-600 hover:underline"><i className="fas fa-trash-alt"></i> 删除</button>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
                <p className="mt-2 text-xs text-gray-500">Tip: 点击表格顶部的列标题可以进行排序</p>
                <p className="mt-4 text-center text-gray-400 text-sm">班级点名系统 V1.0.0</p>
              </div>
              {/* 侧栏功能区 */}
              <div className="w-64 flex-shrink-0 space-y-4">
                {/* 当日出勤率 */}
                <div className="bg-white p-4 rounded shadow">
                  <div className="flex justify-between items-center mb-2">
                    <span className="text-sm font-semibold">当日出勤率</span>
                    <i className="fas fa-sync-alt text-gray-400 cursor-pointer"></i>
                  </div>
                  <canvas ref={donutRef}></canvas>
                  <div className="flex justify-between text-sm mt-2">
                    <span><span className="inline-block w-2 h-2 bg-green-500 rounded-full mr-1"></span>出勤: 90%</span>
                    <span><span className="inline-block w-2 h-2 bg-red-500 rounded-full mr-1"></span>缺勤: 10%</span>
                  </div>
                </div>
                {/* 本周出勤趋势 */}
                <div className="bg-white p-4 rounded shadow">
                  <div className="flex justify-between items-center mb-2">
                    <span className="text-sm font-semibold">本周出勤趋势</span>
                    <i className="fas fa-sync-alt text-gray-400 cursor-pointer"></i>
                  </div>
                  <canvas ref={lineRef}></canvas>
                </div>
                {/* 快速点名 */}
                <div className="bg-white p-4 rounded shadow">
                  <span className="block text-sm font-semibold mb-2">快速点名</span>
                  <button className="w-full bg-blue-600 text-white py-2 rounded flex items-center justify-center">
                    <i className="fas fa-play mr-2"></i>开始点名
                  </button>
                  <p className="text-xs text-gray-400 mt-1">今日尚未进行点名，点击开始</p>
                </div>
                {/* 常用功能 */}
                <div className="bg-white p-4 rounded shadow">
                  <span className="block text-sm font-semibold mb-2">常用功能</span>
                  <div className="grid grid-cols-2 gap-2 text-xs">
                    <button className="bg-gray-100 p-2 rounded flex items-center justify-center text-gray-600">
                      <i className="fas fa-file-export mr-1"></i>导出报表
                    </button>
                    <button className="bg-gray-100 p-2 rounded flex items-center justify-center text-gray-600">
                      <i className="fas fa-file-alt mr-1"></i>请假管理
                    </button>
                    <button className="bg-gray-100 p-2 rounded flex items-center justify-center text-gray-600">
                      <i className="fas fa-random mr-1"></i>随机点名
                    </button>
                    <button className="bg-gray-100 p-2 rounded flex items-center justify-center text-gray-600">
                      <i className="fas fa-chart-bar mr-1"></i>数据分析
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          {/* 添加学生模态框 */}
          {modalOpen && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
              <div className="bg-white w-96 p-4 rounded">
                <div className="flex justify-between items-center mb-4">
                  <h3 className="text-lg font-semibold">添加学生</h3>
                  <button onClick={closeModal} className="text-gray-500 hover:text-gray-700"><i className="fas fa-times"></i></button>
                </div>
                <div className="space-y-4">
                  <div>
                    <label className="block text-sm mb-1">学号</label>
                    <input
                      type="text"
                      className="w-full border rounded p-2"
                      value={newStu.id}
                      onChange={e => setNewStu({ ...newStu, id: e.target.value })}
                    />
                  </div>
                  <div>
                    <label className="block text-sm mb-1">姓名</label>
                    <input
                      type="text"
                      className="w-full border rounded p-2"
                      value={newStu.name}
                      onChange={e => setNewStu({ ...newStu, name: e.target.value })}
                    />
                  </div>
                  <div>
                    <label className="block text-sm mb-1">班级</label>
                    <input
                      type="text"
                      className="w-full border rounded p-2"
                      value={newStu.cls}
                      onChange={e => setNewStu({ ...newStu, cls: e.target.value })}
                    />
                  </div>
                  <div>
                    <label className="block text-sm mb-1">状态</label>
                    <select
                      className="w-full border rounded p-2"
                      value={newStu.status}
                      onChange={e => setNewStu({ ...newStu, status: e.target.value })}
                    >
                      <option>正常</option>
                      <option>请假</option>
                      <option>迟到</option>
                    </select>
                  </div>
                </div>
                <div className="flex justify-end space-x-2 mt-4">
                  <button onClick={closeModal} className="px-4 py-2 text-gray-600">取消</button>
                  <button onClick={handleAdd} className="px-4 py-2 bg-blue-600 text-white rounded">确认添加</button>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>