<html>
<head>
  <meta charset="UTF-8" />
  <title>植物识别日记</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">

    const initialPlantData = [
      {
        id: 1,
        name: '玉兰花',
        date: '2024-06-10',
        description: '在校园里发现的，花朵洁白而芳香。',
        category: '花卉',
        credibility: '高可信',
        imageUrl: 'https://picsum.photos/id/102/400/300',
        notes: '在校园里发现的，花朵洁白而芳香。'
      },
      {
        id: 2,
        name: '银杏',
        date: '2024-06-12',
        description: '叶子是扇形，非常独特。',
        category: '树木',
        credibility: '中等',
        imageUrl: 'https://picsum.photos/id/1015/400/300',
        notes: '叶子是扇形，非常独特。'
      },
      {
        id: 3,
        name: '蒲公英',
        date: '2024-06-14',
        description: '路边随处可见，种子可以随风飘扬。',
        category: '草本',
        credibility: '低可信',
        imageUrl: 'https://picsum.photos/id/1021/400/300',
        notes: '路边随处可见，种子可以随风飘扬。'
      },
    ];

    const App = () => {
      const [plants, setPlants] = React.useState(initialPlantData);
      const [activeFilter, setActiveFilter] = React.useState('全部条目');
      const [activeAccordion, setActiveAccordion] = React.useState(null);

      const [isAddModalOpen, setAddModalOpen] = React.useState(false);
      const [isEditModalOpen, setEditModalOpen] = React.useState(false);
      const [isDeleteModalOpen, setDeleteModalOpen] = React.useState(false);
      
      const [selectedPlant, setSelectedPlant] = React.useState(null);

      const handleEditClick = (plant) => {
        setSelectedPlant(plant);
        setEditModalOpen(true);
      };

      const handleDeleteClick = (plant) => {
        setSelectedPlant(plant);
        setDeleteModalOpen(true);
      };

      const handleFilterClick = (filter) => {
        setActiveFilter(filter);
      };

      const handleAccordionClick = (id) => {
        setActiveAccordion(activeAccordion === id ? null : id);
      };

      const filteredPlants = plants.filter(plant => {
        if (activeFilter === '全部条目') return true;
        return plant.category === activeFilter;
      });

      const categoryColors = {
        '花卉': 'bg-pink-100 text-pink-600',
        '树木': 'bg-yellow-100 text-yellow-700',
        '草本': 'bg-green-100 text-green-700',
      };

      const credibilityColors = {
        '高可信': 'bg-green-100 text-green-600',
        '中等': 'bg-yellow-100 text-yellow-600',
        '低可信': 'bg-red-100 text-red-600',
      };

      return (
        <div className="flex min-h-screen bg-[#FFFDF6]">
          {/* Modals */}
          {isEditModalOpen && <EditModal plant={selectedPlant} onClose={() => setEditModalOpen(false)} />}
          {isDeleteModalOpen && <DeleteModal plant={selectedPlant} onClose={() => setDeleteModalOpen(false)} />}
          {isAddModalOpen && <AddModal onClose={() => setAddModalOpen(false)} />}
          
          <Sidebar />
          
          <main className="flex-1 p-8">
            <Header activeFilter={activeFilter} onFilterClick={handleFilterClick} />
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
              {filteredPlants.map(plant => (
                <PlantCard 
                  key={plant.id} 
                  plant={plant} 
                  categoryColors={categoryColors}
                  credibilityColors={credibilityColors}
                  onEdit={() => handleEditClick(plant)}
                  onDelete={() => handleDeleteClick(plant)}
                />
              ))}
            </div>
            <Footer onAdd={() => setAddModalOpen(true)} />
          </main>

          <aside className="w-[380px] p-6 pt-8 space-y-6">
            <StatsPanel />
            <AccordionPanel activeAccordion={activeAccordion} onAccordionClick={handleAccordionClick} />
            <TipPanel />
          </aside>
        </div>
      );
    };

    const Sidebar = () => (
      <aside className="w-64 bg-[#CDE6D0] p-6 flex flex-col" style={{backgroundImage: 'radial-gradient(rgba(255, 255, 255, 0.5) 1px, transparent 1px)', backgroundSize: '10px 10px'}}>
        <div className="mb-12">
          <h1 className="text-2xl font-bold text-gray-800">植物识别日记</h1>
          <p className="text-sm text-gray-600">记录自然的美好</p>
        </div>
        <nav className="space-y-3 flex-grow">
          <a href="#" className="flex items-center space-x-3 p-3 rounded-lg bg-[#A8D8AD] text-gray-800 font-semibold">
            <i className="fas fa-book w-5 text-center"></i>
            <span>首页日记</span>
          </a>
          <a href="#" className="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#A8D8AD] text-gray-700">
            <i className="fas fa-plus-circle w-5 text-center"></i>
            <span>添加日记</span>
          </a>
          <a href="#" className="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#A8D8AD] text-gray-700">
            <i className="fas fa-chart-pie w-5 text-center"></i>
            <span>统计分析</span>
          </a>
          <a href="#" className="flex items-center space-x-3 p-3 rounded-lg hover:bg-[#A8D8AD] text-gray-700">
            <i className="fas fa-question-circle w-5 text-center"></i>
            <span>帮助说明</span>
          </a>
        </nav>
        <div className="mt-auto bg-white/50 p-3 rounded-lg text-xs text-gray-600">
          <p className="font-semibold">今日小贴士:</p>
          <p>多角度拍摄可提高识别准确度</p>
        </div>
      </aside>
    );

    const Header = ({ activeFilter, onFilterClick }) => {
      const filters = ['全部条目', '树木', '花卉', '草本'];
      return (
        <div className="flex items-center">
          {filters.map(filter => (
            <button 
              key={filter} 
              onClick={() => onFilterClick(filter)}
              className={`px-4 py-1.5 rounded-md text-sm mr-3 transition-colors ${
                activeFilter === filter 
                ? 'bg-[#388E3C] text-white' 
                : 'bg-white text-gray-600 border border-gray-200 hover:bg-gray-50'
              }`}
            >
              {filter}
            </button>
          ))}
        </div>
      );
    };

    const PlantCard = ({ plant, categoryColors, credibilityColors, onEdit, onDelete }) => (
      <div className="bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden flex flex-col">
        <div className="relative">
          <img src={plant.imageUrl} alt={plant.name} className="w-full h-48 object-cover" />
          <div className="absolute top-3 right-3 flex space-x-2">
            <button onClick={onEdit} className="w-8 h-8 flex items-center justify-center bg-white/80 backdrop-blur-sm rounded-full text-gray-600 hover:bg-white">
              <i className="fas fa-pencil-alt text-sm"></i>
            </button>
            <button onClick={onDelete} className="w-8 h-8 flex items-center justify-center bg-white/80 backdrop-blur-sm rounded-full text-gray-600 hover:bg-white">
              <i className="fas fa-trash-alt text-sm"></i>
            </button>
          </div>
        </div>
        <div className="p-4 flex flex-col flex-grow">
          <div className="flex justify-between items-baseline mb-2">
            <p className="text-xs text-gray-400">{plant.date}</p>
            <span className={`px-2 py-0.5 text-xs rounded-full ${credibilityColors[plant.credibility]}`}>{plant.credibility}</span>
          </div>
          <h3 className="text-lg font-bold text-gray-800 mb-1">{plant.name}</h3>
          <p className="text-sm text-gray-500 mb-3 flex-grow">{plant.description}</p>
          <div>
            <span className={`px-2 py-1 text-xs font-medium rounded-md ${categoryColors[plant.category]}`}>{plant.category}</span>
          </div>
        </div>
      </div>
    );

    const Footer = ({ onAdd }) => (
      <div className="mt-8 flex justify-center items-center space-x-4">
        <button onClick={onAdd} className="bg-[#388E3C] text-white px-5 py-2.5 rounded-lg flex items-center space-x-2 text-sm font-medium hover:bg-green-700">
          <i className="fas fa-plus"></i>
          <span>添加新条目</span>
        </button>
        <button className="bg-white border border-gray-200 text-gray-600 px-5 py-2.5 rounded-lg flex items-center space-x-2 text-sm font-medium hover:bg-gray-50">
          <i className="fas fa-download"></i>
          <span>导出日记</span>
        </button>
        <button className="bg-white border border-gray-200 text-red-500 px-5 py-2.5 rounded-lg flex items-center space-x-2 text-sm font-medium hover:bg-red-50">
          <i className="fas fa-trash-alt"></i>
          <span>清空所有</span>
        </button>
      </div>
    );
    
    const StatsPanel = () => (
      <div className="space-y-6">
        <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
          <p className="text-sm text-gray-500">日记总数</p>
          <p className="text-5xl font-bold text-gray-800 text-center mt-1">3</p>
        </div>
        <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
          <p className="text-sm font-semibold text-gray-700 mb-3">分类占比</p>
          <div className="flex items-center space-x-4">
            <div className="relative w-24 h-24">
               <svg className="w-full h-full" viewBox="0 0 36 36">
                  <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#FBBF24" strokeWidth="4" />
                  <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831" fill="none" stroke="#60A5FA" strokeWidth="4" strokeDasharray="33.33, 100" />
                   <path d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831" fill="none" stroke="#4ADE80" strokeWidth="4" strokeDasharray="66.66, 100" transform="rotate(120 18 18)" />
              </svg>
            </div>
            <div className="text-xs space-y-2 text-gray-500">
              <div className="flex items-center"><span className="w-3 h-3 rounded-full bg-[#4ADE80] mr-2"></span>花卉</div>
              <div className="flex items-center"><span className="w-3 h-3 rounded-full bg-[#FBBF24] mr-2"></span>树木</div>
              <div className="flex items-center"><span className="w-3 h-3 rounded-full bg-[#60A5FA] mr-2"></span>草本</div>
            </div>
          </div>
        </div>
        <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
          <p className="text-sm font-semibold text-gray-700 mb-2">最近7天新增趋势</p>
           <div className="relative h-20">
            <svg width="100%" height="100%" viewBox="0 0 300 80" preserveAspectRatio="none">
              <path d="M0 60 C 25 20, 25 20, 50 60 S 75 100, 100 60 S 125 20, 150 60 S 175 100, 200 60 S 225 20, 250 60 S 275 100, 300 60" fill="none" stroke="#4ADE80" strokeWidth="2"/>
              <line x1="0" y1="70" x2="300" y2="70" stroke="#E5E7EB" strokeWidth="1"/>
            </svg>
            <span className="absolute -bottom-1 left-0 text-xs text-gray-400">0</span>
          </div>
          <div className="flex justify-between text-xs text-gray-400 mt-1">
            <span>6天前</span><span>5天前</span><span>4天前</span><span>3天前</span><span>2天前</span><span>1天前</span><span>今天</span>
          </div>
        </div>
        <div className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 text-center">
            <p className="text-sm text-gray-500">节气与植物: <span className="text-green-600 font-semibold">春分后适合观察花卉开花</span></p>
        </div>
      </div>
    );
    
    const AccordionPanel = ({ activeAccordion, onAccordionClick }) => {
      const items = [
        { id: 1, title: '如何拍照识别', content: '拍摄清晰的植物叶片、花朵、果实，然后点击“添加新条目”上传。'},
        { id: 2, title: '编辑日记条目', content: '在条目卡片上点击铅笔图标，即可进入编辑模式。'},
        { id: 3, title: '导出与备份', content: '点击页面底部的“导出日记”按钮，可以选择多种格式进行备份。'},
      ];

      return (
        <div className="bg-white p-2 rounded-xl shadow-sm border border-gray-100 space-y-1">
          <h3 className="text-sm font-semibold text-gray-700 px-2 pt-2 pb-1">帮助说明</h3>
          {items.map(item => (
            <div key={item.id}>
              <button onClick={() => onAccordionClick(item.id)} className="w-full flex justify-between items-center text-left p-2 rounded-lg hover:bg-gray-50">
                <span className="text-sm text-gray-600">{item.title}</span>
                <i className={`fas fa-chevron-down text-xs text-gray-400 transform transition-transform ${activeAccordion === item.id ? 'rotate-180' : ''}`}></i>
              </button>
              {activeAccordion === item.id && (
                <div className="px-2 pb-3 text-sm text-gray-500">
                  {item.content}
                </div>
              )}
            </div>
          ))}
        </div>
      );
    };

    const TipPanel = () => (
      <div className="bg-blue-50 border border-blue-200 text-blue-800 p-4 rounded-xl flex items-start space-x-3 text-sm">
        <i className="fas fa-lightbulb mt-1 text-blue-500"></i>
        <div>
          <span className="font-bold">Tip: </span>
          <span>使用手机拍摄植物时，请保持光线充足</span>
        </div>
      </div>
    );

    const ModalBase = ({ children, onClose, title }) => (
      <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
        <div className="bg-white rounded-lg shadow-xl w-full max-w-lg m-4">
          <div className="flex justify-between items-center p-4 border-b">
            <h3 className="text-lg font-semibold text-gray-800">{title}</h3>
            <button onClick={onClose} className="text-gray-400 hover:text-gray-600">
              <i className="fas fa-times"></i>
            </button>
          </div>
          {children}
        </div>
      </div>
    );

    const EditModal = ({ plant, onClose }) => (
      <ModalBase title="编辑植物日记" onClose={onClose}>
        <div className="p-6 space-y-4">
          <div className="grid grid-cols-3 gap-4 items-center">
            <label className="text-sm text-gray-600">日期</label>
            <input type="text" defaultValue="06/10/2024" className="col-span-2 border border-gray-300 rounded-md p-2 text-sm" />
             <i className="fas fa-calendar-alt absolute right-10 text-gray-400"></i>
          </div>
          <div className="grid grid-cols-3 gap-4 items-center">
            <label className="text-sm text-gray-600">植物名称</label>
            <input type="text" defaultValue={plant.name} className="col-span-2 border border-gray-300 rounded-md p-2 text-sm" />
          </div>
          <div className="grid grid-cols-3 gap-4 items-center">
            <label className="text-sm text-gray-600">识别结果</label>
            <div className="col-span-2 relative">
              <select className="w-full border border-gray-300 rounded-md p-2 text-sm appearance-none">
                <option>高可信</option>
                <option>中等</option>
                <option>低可信</option>
              </select>
              <i className="fas fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"></i>
            </div>
          </div>
          <div className="flex items-center space-x-6">
            <label className="text-sm text-gray-600">分类</label>
            <div className="flex space-x-4">
              <label className="flex items-center space-x-2 text-sm"><input type="radio" name="category" value="树木" defaultChecked={plant.category === '树木'} /><span>树木</span></label>
              <label className="flex items-center space-x-2 text-sm"><input type="radio" name="category" value="花卉" defaultChecked={plant.category === '花卉'}/><span>花卉</span></label>
              <label className="flex items-center space-x-2 text-sm"><input type="radio" name="category" value="草本" defaultChecked={plant.category === '草本'}/><span>草本</span></label>
            </div>
          </div>
          <div>
            <label className="block text-sm text-gray-600 mb-1">笔记</label>
            <textarea rows="3" className="w-full border border-gray-300 rounded-md p-2 text-sm" defaultValue={plant.notes}></textarea>
          </div>
          <div>
            <label className="block text-sm text-gray-600 mb-2">图片</label>
            <div className="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
              <img src={plant.imageUrl} className="w-40 mx-auto rounded-md mb-4" />
              <button className="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200">
                <i className="fas fa-camera mr-2"></i>选择图片
              </button>
              <p className="text-xs text-gray-400 mt-2">(点击按钮以更改，变动后需重新识别)</p>
            </div>
          </div>
        </div>
        <div className="flex justify-end p-4 bg-gray-50 border-t rounded-b-lg space-x-3">
          <button onClick={onClose} className="px-4 py-2 text-sm bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">取消</button>
          <button onClick={onClose} className="px-4 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700">保存修改</button>
        </div>
      </ModalBase>
    );

    const DeleteModal = ({ plant, onClose }) => (
       <div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
        <div className="bg-white rounded-lg shadow-xl w-full max-w-sm m-4 p-8 text-center">
            <div className="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4">
                <i className="fas fa-exclamation-triangle text-3xl text-red-500"></i>
            </div>
            <h3 className="text-xl font-semibold text-gray-800 mb-2">确认删除</h3>
            <p className="text-gray-500 text-sm mb-6">
              是否删除“{plant.name}”这条植物日记？此操作不可撤销。
            </p>
            <div className="flex justify-center space-x-4">
              <button onClick={onClose} className="px-8 py-2 text-sm bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">取消</button>
              <button onClick={onClose} className="px-8 py-2 text-sm bg-red-600 text-white rounded-md hover:bg-red-700">确认删除</button>
            </div>
        </div>
      </div>
    );
    
    const AddModal = ({ onClose }) => (
      <ModalBase title="添加新植物日记" onClose={onClose}>
        <div className="p-6 space-y-4">
          <div className="grid grid-cols-3 gap-4 items-center">
            <label className="text-sm text-gray-600">日期</label>
            <input type="text" placeholder="09/23/2025" className="col-span-2 border border-gray-300 rounded-md p-2 text-sm" />
             <i className="fas fa-calendar-alt absolute right-10 text-gray-400"></i>
          </div>
          <div className="grid grid-cols-3 gap-4 items-center">
            <label className="text-sm text-gray-600">植物名称</label>
            <input type="text" placeholder="例如: 玉兰花、银杏、蒲公英等" className="col-span-2 border border-gray-300 rounded-md p-2 text-sm" />
          </div>
          <div className="grid grid-cols-3 gap-4 items-center">
            <label className="text-sm text-gray-600">识别结果</label>
            <div className="col-span-2 relative">
              <select className="w-full border border-gray-300 rounded-md p-2 text-sm appearance-none text-gray-400">
                <option>高可信</option>
              </select>
              <i className="fas fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs"></i>
            </div>
          </div>
          <div className="flex items-center space-x-6">
            <label className="text-sm text-gray-600">分类</label>
            <div className="flex space-x-4">
              <label className="flex items-center space-x-2 text-sm"><input type="radio" name="add_category" value="树木" /><span>树木</span></label>
              <label className="flex items-center space-x-2 text-sm"><input type="radio" name="add_category" value="花卉" defaultChecked /><span>花卉</span></label>
              <label className="flex items-center space-x-2 text-sm"><input type="radio" name="add_category" value="草本" /><span>草本</span></label>
            </div>
          </div>
          <div>
            <label className="block text-sm text-gray-600 mb-1">笔记</label>
            <textarea rows="3" className="w-full border border-gray-300 rounded-md p-2 text-sm" placeholder="记录你对这种植物的观察或感想..."></textarea>
          </div>
          <div>
            <label className="block text-sm text-gray-600 mb-2">图片</label>
            <div className="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
              <button className="bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200">
                <i className="fas fa-camera mr-2"></i>选择图片
              </button>
              <p className="text-xs text-gray-400 mt-2">(点击按钮以更改，变动后需重新识别)</p>
            </div>
          </div>
        </div>
        <div className="flex justify-end p-4 bg-gray-50 border-t rounded-b-lg space-x-3">
          <button onClick={onClose} className="px-4 py-2 text-sm bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50">取消</button>
          <button onClick={onClose} className="px-4 py-2 text-sm bg-green-600 text-white rounded-md hover:bg-green-700">保存</button>
        </div>
      </ModalBase>
    );


    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);

  </script>
</body>
</html>