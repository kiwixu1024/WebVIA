<html>
<head>
    <meta charset="UTF-8" />
    <title>明信片分享</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <style>
        body {
            background-color: #FDFBF6;
        }
    </style>
</head>
<body>

<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect } = React;

    const initialPostcards = [
        {
            id: 1,
            from: "张小明",
            to: "李华",
            date: "2024-01-15",
            message: "新年快乐! 希望你在新的一年里一切顺利, 实现所有的愿望!",
            imageUrl: "https://picsum.photos/id/1015/100/100"
        },
        {
            id: 2,
            from: "王芳",
            to: "赵敏",
            date: "2024-02-14",
            message: "情人节快乐！虽然相隔千里, 但我的心意与你同在, 期待下次见面!",
            imageUrl: "https://picsum.photos/id/1025/100/100"
        },
        {
            id: 3,
            from: "苏晴",
            to: "刘强",
            date: "2024-03-08",
            message: "生日快乐！祝你的新一岁充满惊喜和幸福，愿所有美好如约而至。",
            imageUrl: "https://picsum.photos/id/1043/100/100"
        },
        {
            id: 4,
            from: "林小雨",
            to: "张伟",
            date: "2024-04-01",
            message: "谢谢你的明信片！巴黎的景色真美, 期待有一天我也能去那里旅行。",
            imageUrl: "https://picsum.photos/id/106/100/100"
        },
        {
            id: 5,
            from: "黄磊",
            to: "孙艺",
            date: "2024-04-15",
            message: "毕业快乐！四年时光匆匆, 愿你前程似锦, 未来可期, 我们要一直保持联系哦！",
            imageUrl: "https://picsum.photos/id/219/100/100"
        },
        {
            id: 6,
            from: "周小",
            to: "吴迪",
            date: "2024-05-01",
            message: "五一假期快乐！我己经到达海南了,这里的海滩太美了, 阳光明媚、海水湛蓝, 真想你也在心里。",
            imageUrl: "https://picsum.photos/id/237/100/100"
        }
    ];
    
    const modalImageOptions = [
        { id: 'modal-img-1', url: 'https://picsum.photos/id/1015/80/60' },
        { id: 'modal-img-2', url: 'https://picsum.photos/id/1025/80/60' },
        { id: 'modal-img-3', url: 'https://picsum.photos/id/1043/80/60' },
        { id: 'modal-img-4', url: 'https://picsum.photos/id/219/80/60' },
        { id: 'modal-img-5', url: 'https://picsum.photos/id/237/80/60' },
    ];


    function Header({ currentView, setCurrentView }) {
        const navItemClass = "px-4 py-2 cursor-pointer text-gray-500";
        const activeNavItemClass = "text-orange-500 border-b-2 border-orange-500 font-semibold";

        return (
            <header className="flex justify-between items-center p-4 bg-white border-b">
                <h1 className="text-2xl font-bold text-gray-700">明信片分享</h1>
                <nav className="flex items-center space-x-4">
                    <span onClick={() => setCurrentView('display')} className={`${navItemClass} ${currentView === 'display' ? activeNavItemClass : ''}`}>展示区</span>
                    <span onClick={() => setCurrentView('edit')} className={`${navItemClass} ${currentView === 'edit' ? activeNavItemClass : ''}`}>编辑区</span>
                    <span onClick={() => setCurrentView('help')} className={`${navItemClass} ${currentView === 'help' ? activeNavItemClass : ''}`}>帮助说明</span>
                </nav>
            </header>
        );
    }

    function LeftSidebar() {
        return (
            <aside className="w-64 p-6 space-y-4">
                <nav>
                    <ul>
                        <li className="p-3 rounded-lg bg-blue-100 text-blue-600 font-semibold">
                            <i className="fas fa-clone w-6"></i> 全部明信片
                            <p className="text-xs font-normal mt-1">提示: 点击查看所有明信片</p>
                        </li>
                        <li className="p-3 rounded-lg hover:bg-gray-100 cursor-pointer text-gray-600">
                             <i className="fas fa-heart w-6 text-red-400"></i> 我的收藏
                             <p className="text-xs font-normal mt-1">收藏你喜欢的明信片哦!</p>
                        </li>
                        <li className="p-3 rounded-lg hover:bg-gray-100 cursor-pointer text-gray-600">
                             <i className="fas fa-fire w-6 text-orange-400"></i> 热门分享
                             <p className="text-xs font-normal mt-1">看看大家都在分享什么</p>
                        </li>
                        <li className="p-3 rounded-lg hover:bg-gray-100 cursor-pointer text-gray-600">
                             <i className="fas fa-palette w-6 text-purple-400"></i> 特色模板
                             <p className="text-xs font-normal mt-1">使用精美模板快速创建</p>
                        </li>
                    </ul>
                </nav>
                <div className="bg-blue-50 border-l-4 border-blue-400 p-4 rounded-lg mt-8">
                    <p className="font-semibold text-blue-800">在这分享你的心情,</p>
                    <p className="font-semibold text-blue-800">每一刻都是珍贵的回忆</p>
                </div>
            </aside>
        );
    }
    
    function RightSidebar({ cardCount }) {
        const chartData = [8, 10, 6, 12, 9, 14, 11, 7, 5, 8, 10, 13];
        return (
             <aside className="w-80 p-6">
                <div className="bg-white p-4 rounded-lg shadow-sm border">
                    <h3 className="text-lg font-semibold text-gray-700">数据统计</h3>
                    <div className="mt-4 flex justify-around text-center">
                        <div>
                            <p className="text-3xl font-bold text-orange-500">{cardCount}</p>
                            <p className="text-sm text-gray-500">分享总数</p>
                        </div>
                        <div>
                            <p className="text-3xl font-bold text-gray-400">0</p>
                            <p className="text-sm text-gray-500">编辑次数</p>
                        </div>
                         <div>
                            <p className="text-3xl font-bold text-gray-400">0</p>
                            <p className="text-sm text-gray-500">删除次数</p>
                        </div>
                    </div>
                    <div className="text-right mt-3">
                        <a href="#" className="text-sm text-blue-500 hover:underline"><i className="fas fa-sync-alt mr-1"></i>刷新</a>
                    </div>
                </div>

                <div className="bg-white p-4 rounded-lg shadow-sm border mt-4">
                    <h3 className="text-lg font-semibold text-gray-700">本月明信片分享走势</h3>
                    <div className="mt-4 h-32 flex items-end justify-between px-2">
                        {chartData.map((height, index) => (
                           <div key={index} className="w-3 bg-blue-200 hover:bg-blue-400 rounded-t-sm" style={{ height: `${height * 6}%` }}></div>
                        ))}
                    </div>
                     <div className="flex justify-between text-xs text-gray-400 mt-1 px-2">
                        <span>第1周</span>
                        <span>第6周</span>
                        <span>第12周</span>
                    </div>
                    <div className="mt-4 p-3 bg-gray-50 rounded-md text-center text-sm text-gray-500 italic">
                        "每一张明信片都承载着一份份弥足珍贵的回忆与情感。"
                    </div>
                </div>
            </aside>
        );
    }

    function Footer() {
        return (
            <footer className="col-span-3 flex justify-between items-center text-xs text-gray-500 px-8 py-4 border-t bg-white">
                <div className="space-x-4">
                    <a href="#" className="hover:underline">常见问题</a>
                    <a href="#" className="hover:underline">联系我们</a>
                    <a href="#" className="hover:underline">隐私政策</a>
                </div>
                <div>
                    <i className="far fa-lightbulb text-yellow-500 mr-2"></i>
                    <span>Tip: 保持心情美好, 每一张明信片都是值得传递~</span>
                </div>
                <div>
                    <span>© 2024 明信片分享 版权所有</span>
                </div>
            </footer>
        );
    }
    
    function Postcard({ card, onEditClick, onDeleteClick }) {
        return (
            <div className="bg-white p-4 rounded-lg shadow-md border border-gray-200">
                <div className="flex justify-between items-center mb-2">
                    <h4 className="font-semibold text-blue-600"><i className="fas fa-user-friends text-sm mr-2 text-gray-400"></i>{card.from} → {card.to}</h4>
                    <div className="space-x-3 text-gray-400">
                        <i className="fas fa-pencil-alt cursor-pointer hover:text-blue-500" onClick={() => onEditClick(card)}></i>
                        <i className="fas fa-trash-alt cursor-pointer hover:text-red-500" onClick={() => onDeleteClick(card)}></i>
                    </div>
                </div>
                <p className="text-xs text-gray-400 mb-2">{card.date}</p>
                <p className="text-gray-600 text-sm mb-4 h-14">{card.message}</p>
                <div className="flex items-center">
                    <img src={card.imageUrl} alt="postcard thumbnail" className="w-12 h-12 rounded-md object-cover"/>
                </div>
            </div>
        );
    }

    function DisplayView({ cards, onAddClick, onEditClick, onDeleteClick }) {
        return (
            <div className="p-6">
                <div className="flex justify-between items-center mb-6">
                    <h2 className="text-xl font-bold text-gray-800">我的明信片集</h2>
                    <button onClick={onAddClick} className="bg-orange-400 text-white font-semibold px-4 py-2 rounded-lg shadow-sm hover:bg-orange-500 transition-colors">
                        <i className="fas fa-plus mr-2"></i> 添加新明信片
                    </button>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {cards.map(card => <Postcard key={card.id} card={card} onEditClick={onEditClick} onDeleteClick={onDeleteClick} />)}
                </div>
            </div>
        );
    }
    
    function EditView({cards, onDeleteClick}) {
        return (
            <div className="p-6">
                <div className="flex justify-between items-center mb-6">
                    <div className="flex items-center space-x-2 bg-blue-50 text-blue-700 text-sm rounded-full px-4 py-2">
                        <i className="fas fa-info-circle"></i>
                        <span>小贴士: 双击文字可直接修改, 按 Esc 取消编辑</span>
                    </div>
                    <div className="flex space-x-4">
                        <button className="bg-white border border-gray-300 text-gray-700 font-semibold px-4 py-2 rounded-lg shadow-sm hover:bg-gray-100">
                           <i className="fas fa-plus-square mr-2"></i> 新增模板
                        </button>
                        <button className="bg-blue-500 text-white font-semibold px-4 py-2 rounded-lg shadow-sm hover:bg-blue-600">
                           <i className="fas fa-download mr-2"></i> 导入/导出
                        </button>
                    </div>
                </div>
                <div className="bg-white p-4 rounded-lg shadow-md border border-gray-200">
                    <div className="flex justify-between items-center border-b pb-3 mb-3">
                        <div className="flex items-center space-x-3 text-gray-600">
                            <input type="checkbox" className="h-4 w-4 rounded text-blue-500 focus:ring-blue-400"/>
                            <label>全选</label>
                        </div>
                        <button className="bg-gray-200 text-gray-600 px-3 py-1 rounded-md text-sm hover:bg-gray-300">
                            <i className="fas fa-trash-alt mr-2"></i>批量删除
                        </button>
                    </div>
                    <div className="space-y-3">
                      {cards.map(card => (
                        <div key={card.id} className="flex items-center justify-between p-3 border-b last:border-b-0 hover:bg-gray-50">
                           <div className="flex items-center space-x-4">
                             <input type="checkbox" className="h-4 w-4 rounded text-blue-500 focus:ring-blue-400"/>
                             <div>
                               <p className="font-semibold text-gray-700">{card.from} → {card.to} ({card.date})</p>
                               <p className="text-sm text-gray-500">{card.message}</p>
                             </div>
                           </div>
                           <i className="fas fa-trash-alt cursor-pointer text-red-500 hover:text-red-700" onClick={() => onDeleteClick(card)}></i>
                        </div>
                      ))}
                    </div>
                </div>
            </div>
        );
    }
    
    function HelpView() {
        return (
             <div className="p-8">
                <h2 className="text-3xl font-bold text-gray-800 text-center mb-10">使用指南</h2>
                <div className="space-y-12">
                     <div className="flex items-start justify-between space-x-8">
                        <div className="flex-1">
                            <h3 className="text-xl font-bold text-blue-600 mb-4"><i className="fas fa-plus-circle mr-2"></i>如何添加明信片</h3>
                            <ol className="list-decimal list-inside space-y-2 text-gray-700">
                                <li>在展示区页面点击右上方橙色的“添加新明信片”按钮</li>
                                <li>在弹出的表单中填写发送者、接收者、日期和消息内容</li>
                                <li>选择一张背景图片（或使用默认图片）</li>
                                <li>点击“保存”按钮完成添加</li>
                            </ol>
                        </div>
                        <img src="https://picsum.photos/id/326/300/200" alt="Adding postcard illustration" className="w-1/3 rounded-lg shadow-lg"/>
                    </div>
                     <div className="flex items-start justify-between space-x-8">
                        <div className="flex-1">
                            <h3 className="text-xl font-bold text-blue-600 mb-4"><i className="fas fa-edit mr-2"></i>如何编辑/删除明信片</h3>
                             <div className="space-y-4">
                                <div>
                                    <p className="font-semibold text-gray-800">编辑明信片:</p>
                                    <ol className="list-decimal list-inside space-y-2 text-gray-700 mt-2">
                                        <li>在展示区找到需要编辑的明信片</li>
                                        <li>点击明信片右上角的“铅笔”图标</li>
                                        <li>在弹出的表单中修改内容</li>
                                        <li>点击“保存”按钮完成编辑</li>
                                    </ol>
                                </div>
                                <div>
                                    <p className="font-semibold text-gray-800">删除明信片:</p>
                                    <ol className="list-decimal list-inside space-y-2 text-gray-700 mt-2">
                                        <li>在展示区找到需要删除的明信片</li>
                                        <li>点击明信片右上角的“垃圾桶”图标</li>
                                        <li>在确认对话框中点击“确认删除”</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                         <img src="https://picsum.photos/id/40/300/200" alt="Editing postcard illustration" className="w-1/3 rounded-lg shadow-lg"/>
                    </div>

                    <div className="flex items-start justify-between space-x-8">
                        <div className="flex-1">
                            <h3 className="text-xl font-bold text-blue-600 mb-4"><i className="fas fa-file-export mr-2"></i>导入/导出功能示例</h3>
                            <p className="text-gray-700 mb-2">通过导入导出功能，您可以轻松备份或分享您的明信片集合:</p>
                             <ol className="list-decimal list-inside space-y-2 text-gray-700">
                                <li>进入编辑区页面</li>
                                <li>点击顶部的“导入/导出”按钮</li>
                                <li>选择“导出为JSON”可将当前明信片集保存为文件</li>
                                <li>选择“从JSON导入”可从文件中导入明信片集</li>
                            </ol>
                        </div>
                        <img src="https://picsum.photos/id/1/300/200" alt="Import/Export illustration" className="w-1/3 rounded-lg shadow-lg"/>
                    </div>
                </div>
            </div>
        )
    }
    
    function AddModal({ onClose, onSave }) {
        return (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
                <div className="bg-white rounded-lg shadow-2xl p-8 w-full max-w-lg">
                    <h2 className="text-xl font-bold text-gray-800 mb-6">添加新明信片</h2>
                    <form>
                        <div className="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">发送者:</label>
                                <input type="text" placeholder="请输入发送者姓名" className="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"/>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">接收者:</label>
                                <input type="text" placeholder="请输入接收者姓名" className="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"/>
                            </div>
                        </div>
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">日期:</label>
                            <input type="text" defaultValue="09/23/2025" className="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"/>
                        </div>
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">消息内容:</label>
                            <textarea placeholder="写下你想说的话..." rows="4" className="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"></textarea>
                        </div>
                        <div className="mb-6">
                             <label className="block text-sm font-medium text-gray-700 mb-2">选择图案:</label>
                             <div className="flex space-x-2">
                                {modalImageOptions.map((img, index) => (
                                    <label key={img.id} className="cursor-pointer">
                                        <input type="radio" name="image-option" value={img.url} className="sr-only peer"/>
                                        <img src={img.url} className={`rounded-md border-2 ${index === 2 ? 'border-orange-500' : 'border-transparent'} peer-checked:border-orange-500 hover:opacity-80`}/>
                                    </label>
                                ))}
                            </div>
                        </div>
                        <div className="flex justify-end space-x-4">
                            <button type="button" onClick={onClose} className="px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">取消</button>
                            <button type="button" onClick={onSave} className="px-6 py-2 bg-orange-400 text-white rounded-md hover:bg-orange-500">
                               <i className="fas fa-check mr-2"></i>保存
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        );
    }
    
    function EditModal({ card, onClose, onSave }) {
        if (!card) return null;
        return (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
                <div className="bg-white rounded-lg shadow-2xl p-8 w-full max-w-lg">
                    <h2 className="text-xl font-bold text-gray-800 mb-6">编辑明信片</h2>
                    <form>
                        <div className="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">发送者:</label>
                                <input type="text" defaultValue={card.from} className="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"/>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-1">接收者:</label>
                                <input type="text" defaultValue={card.to} className="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"/>
                            </div>
                        </div>
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">日期:</label>
                            <input type="text" defaultValue={card.date} className="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"/>
                        </div>
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">消息内容:</label>
                            <textarea rows="4" defaultValue={card.message} className="w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"></textarea>
                        </div>
                        <div className="mb-6">
                             <label className="block text-sm font-medium text-gray-700 mb-2">选择图案:</label>
                             <div className="flex space-x-2">
                                {modalImageOptions.map((img, index) => (
                                    <label key={img.id} className="cursor-pointer">
                                        <input type="radio" name="image-option" value={img.url} className="sr-only peer"/>
                                        <img src={img.url} className={`rounded-md border-2 ${index === 0 ? 'border-orange-500' : 'border-transparent'} peer-checked:border-orange-500 hover:opacity-80`}/>
                                    </label>
                                ))}
                            </div>
                        </div>
                        <div className="flex justify-end space-x-4">
                            <button type="button" onClick={onClose} className="px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300">取消</button>
                            <button type="button" onClick={onSave} className="px-6 py-2 bg-orange-400 text-white rounded-md hover:bg-orange-500">
                               <i className="fas fa-check mr-2"></i>保存
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        );
    }
    
    function DeleteModal({ onClose, onConfirm }) {
        return (
             <div className="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
                <div className="bg-white rounded-lg shadow-2xl p-8 w-full max-w-md text-center">
                    <div className="text-red-500 text-5xl mb-4">
                        <i className="fas fa-exclamation-triangle"></i>
                    </div>
                    <h2 className="text-xl font-bold text-gray-800 mb-2">您确定要删除这张明信片吗?</h2>
                    <p className="text-gray-500 mb-6">此操作无法撤销, 删除后将无法恢复该明信片。</p>
                    <div className="flex justify-center space-x-4">
                        <button onClick={onClose} className="px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 w-28">取消</button>
                        <button onClick={onConfirm} className="px-6 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 w-28">确认删除</button>
                    </div>
                </div>
            </div>
        );
    }


    function App() {
        const [postcards, setPostcards] = useState(initialPostcards);
        const [currentView, setCurrentView] = useState('display'); // 'display', 'edit', 'help'
        
        const [isAddModalOpen, setAddModalOpen] = useState(false);
        const [isEditModalOpen, setEditModalOpen] = useState(false);
        const [editingPostcard, setEditingPostcard] = useState(null);
        const [isDeleteModalOpen, setDeleteModalOpen] = useState(false);
        const [deletingPostcard, setDeletingPostcard] = useState(null);

        const handleAddClick = () => setAddModalOpen(true);
        const handleAddModalClose = () => setAddModalOpen(false);
        
        const handleEditClick = (card) => {
            setEditingPostcard(card);
            setEditModalOpen(true);
        };
        const handleEditModalClose = () => {
            setEditModalOpen(false);
            setEditingPostcard(null);
        };
        
        const handleDeleteClick = (card) => {
            setDeletingPostcard(card);
            setDeleteModalOpen(true);
        };
        const handleDeleteModalClose = () => {
            setDeleteModalOpen(false);
            setDeletingPostcard(null);
        };

        const confirmDelete = () => {
            // This is where you would actually delete the card
            // For now, it just closes the modal
            console.log("Deleting card:", deletingPostcard.id);
            handleDeleteModalClose();
        }

        const renderView = () => {
            switch (currentView) {
                case 'edit':
                    return <EditView cards={postcards} onDeleteClick={handleDeleteClick} />;
                case 'help':
                    return <HelpView />;
                case 'display':
                default:
                    return <DisplayView cards={postcards} onAddClick={handleAddClick} onEditClick={handleEditClick} onDeleteClick={handleDeleteClick}/>;
            }
        }

        return (
            <div className="min-h-screen flex flex-col font-sans">
                <div className="flex-grow grid grid-cols-[auto,1fr,auto]">
                    <LeftSidebar />
                    <main className="flex flex-col">
                        <Header currentView={currentView} setCurrentView={setCurrentView} />
                        <div className="flex-grow bg-white rounded-lg shadow-inner m-6 mt-0">
                           {renderView()}
                        </div>
                    </main>
                    <RightSidebar cardCount={postcards.length}/>
                </div>
                <Footer />
                
                {isAddModalOpen && <AddModal onClose={handleAddModalClose} onSave={handleAddModalClose} />}
                {isEditModalOpen && <EditModal card={editingPostcard} onClose={handleEditModalClose} onSave={handleEditModalClose} />}
                {isDeleteModalOpen && <DeleteModal onClose={handleDeleteModalClose} onConfirm={confirmDelete} />}
            </div>
        );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
</script>

</body>
</html>