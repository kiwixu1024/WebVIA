<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>羽毛球活动管理</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
</head>
<body class="bg-gray-50">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const initialActivities = [
            {
                id: 1,
                title: "春季友谊赛",
                date: "2024-06-15",
                startTime: "10:00",
                endTime: "12:00",
                location: "羽毛球馆1号场",
                participants: 16,
                maxParticipants: 20,
                type: "友谊赛",
                tagColor: "bg-green-100 text-green-800"
            },
            {
                id: 2,
                title: "周末提升课",
                date: "2024-06-17",
                startTime: "14:00",
                endTime: "16:00",
                location: "羽毛球馆2号场",
                participants: 8,
                maxParticipants: 12,
                type: "培训课",
                tagColor: "bg-blue-100 text-blue-800"
            }
        ];

        const Sidebar = () => {
            const navItems = [
                { icon: "fa-calendar-alt", label: "活动管理", active: true },
                { icon: "fa-users", label: "成员管理", active: false },
                { icon: "fa-chart-line", label: "统计报表", active: false },
                { icon: "fa-cog", label: "系统设置", active: false },
            ];

            return (
                <aside className="w-60 bg-white h-screen flex flex-col fixed shadow-sm">
                    <div className="h-16 flex items-center px-6 border-b border-gray-200">
                        <h1 className="text-xl font-bold text-gray-800">羽毛球管理系统</h1>
                    </div>
                    <nav className="flex-grow pt-6 px-4">
                        <ul>
                            {navItems.map(item => (
                                <li key={item.label}>
                                    <a href="#" className={`flex items-center px-4 py-2.5 my-1 rounded-lg text-sm font-medium ${item.active ? 'bg-green-100 text-green-600' : 'text-gray-600 hover:bg-gray-100'}`}>
                                        <i className={`fas ${item.icon} w-6 h-5 mr-3 flex items-center justify-center`}></i>
                                        <span>{item.label}</span>
                                    </a>
                                </li>
                            ))}
                        </ul>
                    </nav>
                </aside>
            );
        };
        
        const TopBar = ({ onShowHelp, onShowDashboard }) => (
             <div className="flex justify-end items-center gap-6 text-sm text-gray-600 h-16 px-8 border-b border-gray-200 bg-white">
                <button className="flex items-center gap-2 hover:text-green-600">
                    <i className="far fa-plus-circle"></i>
                    <span>添加活动</span>
                </button>
                <button onClick={onShowHelp} className="flex items-center gap-2 hover:text-green-600">
                    <i className="far fa-question-circle"></i>
                    <span>帮助说明</span>
                </button>
            </div>
        );

        const ActivityList = ({ activities, onSelect, onDelete }) => (
            <div className="bg-white p-6 rounded-lg shadow-sm flex-grow">
                <h2 className="text-lg font-semibold text-gray-800 mb-4">活动列表</h2>
                <div className="space-y-4">
                    {activities.map(activity => (
                        <div key={activity.id} className="border border-gray-200 rounded-lg p-4">
                            <div className="flex justify-between items-start">
                                <div>
                                    <h3 className="font-semibold text-gray-900">{activity.title}</h3>
                                    <p className="text-sm text-gray-500 mt-1">{activity.date} {activity.startTime}-{activity.endTime}</p>
                                    <div className="flex items-center text-sm text-gray-500 mt-2">
                                        <i className="fas fa-map-marker-alt mr-2 text-gray-400"></i>
                                        {activity.location}
                                    </div>
                                    <div className="flex items-center text-sm text-gray-500 mt-1">
                                        <i className="fas fa-users mr-2 text-gray-400"></i>
                                        <span className="text-green-600 font-medium">{activity.participants}</span>/{activity.maxParticipants} 人
                                    </div>
                                    <div className="mt-3">
                                        <span className={`px-2 py-1 text-xs font-medium rounded-full ${activity.tagColor}`}>{activity.type}</span>
                                    </div>
                                </div>
                                <div className="flex items-center gap-3 text-gray-400">
                                    <button onClick={() => onSelect(activity.id)} className="hover:text-green-600"><i className="fas fa-pencil-alt"></i></button>
                                    <button onClick={() => onDelete(activity.id)} className="hover:text-red-500"><i className="fas fa-trash-alt"></i></button>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
                <div className="mt-6 text-xs text-gray-400 bg-gray-50 p-3 rounded-md">
                    Tip: 为了保证最佳体验，请使用 Chrome 浏览器且分辨率不低于 1366x768。更多帮助请点击右上角帮助按钮或联系管理员 support@badminton.com。
                </div>
            </div>
        );

        const ActivityDetails = ({ activity, onCancel }) => {
            if (!activity) {
                return (
                    <div className="bg-white p-6 rounded-lg shadow-sm w-1/3">
                        <h2 className="text-lg font-semibold text-gray-800 mb-4">活动详情</h2>
                        <div className="flex flex-col items-center justify-center h-full text-gray-400 border-2 border-dashed border-gray-200 rounded-lg">
                            <i className="fas fa-hand-pointer fa-2x"></i>
                            <p className="mt-4">请从左侧选择一个活动进行编辑</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="bg-white p-6 rounded-lg shadow-sm w-1/3">
                    <h2 className="text-lg font-semibold text-gray-800 mb-6">编辑活动</h2>
                    <div className="space-y-4">
                        <div>
                            <label className="text-sm font-medium text-gray-700">活动名称</label>
                            <input type="text" defaultValue={activity.title} className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm" />
                        </div>
                        <div className="grid grid-cols-2 gap-4">
                            <div>
                                <label className="text-sm font-medium text-gray-700">日期</label>
                                <input type="text" defaultValue="06/15/2024" className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm" />
                            </div>
                            <div>
                                <label className="text-sm font-medium text-gray-700">场地</label>
                                <input type="text" defaultValue={activity.location} className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm bg-gray-50" readOnly />
                            </div>
                        </div>
                         <div className="grid grid-cols-2 gap-4">
                            <div>
                                <label className="text-sm font-medium text-gray-700">开始时间</label>
                                 <div className="relative mt-1">
                                    <input type="text" defaultValue={activity.startTime + " AM"} className="block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm" />
                                     <i className="far fa-clock absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                 </div>
                            </div>
                            <div>
                                <label className="text-sm font-medium text-gray-700">结束时间</label>
                                <div className="relative mt-1">
                                    <input type="text" defaultValue={activity.endTime + " PM"} className="block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm" />
                                    <i className="far fa-clock absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                 </div>
                            </div>
                        </div>
                        <div>
                            <label className="text-sm font-medium text-gray-700">参与上限</label>
                            <div className="flex items-center gap-4 mt-2">
                                <input type="range" min="1" max="40" defaultValue={activity.maxParticipants} className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-500" />
                                <span className="text-gray-700 font-medium">{activity.maxParticipants}人</span>
                            </div>
                        </div>
                        <div>
                            <label className="text-sm font-medium text-gray-700">活动类型</label>
                            <select className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
                                <option>友谊赛</option>
                                <option>培训课</option>
                            </select>
                        </div>
                    </div>
                     <div className="flex justify-end gap-3 mt-8">
                        <button onClick={onCancel} className="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">取消</button>
                        <button className="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-500 hover:bg-green-600">保存修改</button>
                    </div>
                </div>
            );
        };
        
        const Statistics = () => (
            <div className="bg-white p-6 rounded-lg shadow-sm w-1/3">
                <h2 className="text-lg font-semibold text-gray-800 mb-4">活动统计</h2>
                <div className="mb-6">
                    <h3 className="text-sm font-medium text-gray-600">今日场地使用率</h3>
                    <div className="flex items-center mt-3">
                         <div className="relative w-32 h-32">
                             <svg className="w-full h-full" viewBox="0 0 36 36">
                                 <path className="text-gray-200" stroke="currentColor" strokeWidth="3" fill="none"
                                     d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831" />
                                 <path className="text-green-500" stroke="currentColor" strokeWidth="3" fill="none"
                                     strokeDasharray="75, 100"
                                     d="M18 2.0845
                                        a 15.9155 15.9155 0 0 1 0 31.831
                                        a 15.9155 15.9155 0 0 1 0 -31.831" />
                             </svg>
                             <div className="absolute inset-0 flex items-center justify-center">
                                 <span className="text-3xl font-bold text-gray-800">75%</span>
                             </div>
                         </div>
                         <div className="ml-6 space-y-2 text-sm text-gray-600">
                             <div className="flex items-center"><span className="w-3 h-3 rounded-full bg-green-500 mr-2"></span>已使用</div>
                             <div className="flex items-center"><span className="w-3 h-3 rounded-full bg-gray-200 mr-2"></span>未使用</div>
                         </div>
                    </div>
                </div>
                <div>
                     <h3 className="text-sm font-medium text-gray-600">近7天参与人数趋势</h3>
                     <div className="mt-4 h-36 relative">
                         <svg width="100%" height="100%" viewBox="0 0 350 120" preserveAspectRatio="none">
                             <path d="M0 80 L50 60 L100 70 L150 50 L200 65 L250 55 L300 60 L350 40" fill="none" stroke="#6EE7B7" strokeWidth="2"/>
                             <path d="M0 80 L50 60 L100 70 L150 50 L200 65 L250 55 L300 60 L350 40 V 120 H 0 Z" fill="url(#grad)" />
                             <defs>
                                <linearGradient id="grad" x1="0%" y1="0%" x2="0%" y2="100%">
                                  <stop offset="0%" style={{stopColor: 'rgba(110, 231, 183, 0.2)'}} />
                                  <stop offset="100%" style={{stopColor: 'rgba(110, 231, 183, 0)'}} />
                                </linearGradient>
                              </defs>
                         </svg>
                         <div className="absolute -bottom-2 w-full flex justify-between text-xs text-gray-500">
                             <span>7天前</span>
                             <span>6天前</span>
                             <span>5天前</span>
                             <span>4天前</span>
                             <span>3天前</span>
                             <span>2天前</span>
                             <span>今天</span>
                         </div>
                     </div>
                </div>
                <button className="mt-10 w-full py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                    <i className="fas fa-upload mr-2"></i>导出报表
                </button>
            </div>
        );

        const DashboardView = ({ activities, selectedActivityId, onSelect, onCancel, onDelete }) => {
            const selected = activities.find(a => a.id === selectedActivityId);
            return (
                <div className="p-8 flex-grow">
                    <header>
                        <h1 className="text-2xl font-bold text-gray-800">羽毛球活动管理</h1>
                        <p className="mt-1 text-gray-600">智能化羽毛球赛事与训练全流程管理平台，实时统计、快速操作、提升场地利用率。</p>
                    </header>
                    <main className="mt-6 flex gap-6">
                        <ActivityList activities={activities} onSelect={onSelect} onDelete={onDelete} />
                        <div className="flex flex-col gap-6 w-1/3">
                            <ActivityDetails activity={selected} onCancel={onCancel} />
                            <Statistics />
                        </div>
                    </main>
                </div>
            );
        };
        
        const HelpView = ({ onShowNewModal }) => (
            <div className="p-8 flex-grow flex justify-center">
                <div className="bg-white p-8 rounded-lg shadow-sm w-full max-w-4xl">
                    <h2 className="text-2xl font-bold text-center text-gray-800 mb-8">帮助说明</h2>
                    <div className="space-y-6 text-gray-700">
                        <div>
                            <h3 className="font-semibold text-green-600">[展示区]</h3>
                            <ul className="list-disc list-inside mt-2 space-y-1">
                                <li>查看所有活动情况，支持点击卡片快速编辑或删除。</li>
                                <li>点击卡片右上角<i className="fas fa-pencil-alt mx-1"></i>可修改活动信息</li>
                                <li>点击卡片右上角<i className="fas fa-trash-alt mx-1"></i>可移除该活动</li>
                                <li>活动卡片显示名称、时间、场地和参与人数等关键信息</li>
                            </ul>
                        </div>
                        <div>
                            <h3 className="font-semibold text-green-600">[编辑区]</h3>
                             <ul className="list-disc list-inside mt-2 space-y-1">
                                <li>在此修改活动详情并保存，数据即时生效。</li>
                                <li>修改活动名称、日期、时间、场地、人数上限和类型</li>
                                <li>点击"保存修改"按钮提交更改</li>
                                <li>点击"取消"按钮放弃更改</li>
                            </ul>
                        </div>
                        <div>
                            <h3 className="font-semibold text-green-600">[统计区]</h3>
                            <ul className="list-disc list-inside mt-2 space-y-1">
                                <li>查看场地使用率与参与趋势，点击"导出报表"获取PDF或Excel文件。</li>
                                <li>圆形图展示今日场地使用率</li>
                                <li>折线图展示近7天参与人数变化趋势</li>
                                <li>点击导出报表按钮下载详细统计数据</li>
                            </ul>
                        </div>
                         <div>
                            <h3 className="font-semibold text-green-600">[操作栏]</h3>
                            <ul className="list-disc list-inside mt-2 space-y-1">
                                <li>使用"<span onClick={onShowNewModal} className="text-blue-500 cursor-pointer hover:underline">点击新建活动</span>"按钮快速创建新赛事、"批量导入"支持Excel模板上传。</li>
                                <li><span onClick={onShowNewModal} className="text-blue-500 cursor-pointer hover:underline">点击新建活动</span>按钮创建单个活动</li>
                                <li>点击批量导入按钮从Excel导入多个活动</li>
                                <li>点击导出全部数据按钮按备份所有活动信息</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        );


        const FooterBar = ({ onShowNewModal }) => (
            <div className="h-16 bg-white border-t border-gray-200 fixed bottom-0 left-60 right-0 flex items-center justify-between px-8">
                <p className="text-sm text-gray-600">共 2 个活动，已安排 24 人次</p>
                <div className="flex items-center gap-3">
                    <button onClick={onShowNewModal} className="px-4 py-2 bg-green-500 text-white rounded-md text-sm font-medium hover:bg-green-600 flex items-center gap-2">
                        <i className="fas fa-plus"></i>新建活动
                    </button>
                    <button className="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-50 flex items-center gap-2">
                        <i className="fas fa-upload"></i>批量导入
                    </button>
                    <button className="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md text-sm font-medium hover:bg-gray-50 flex items-center gap-2">
                        <i className="fas fa-download"></i>导出全部数据
                    </button>
                </div>
            </div>
        );
        
        const NewActivityModal = ({ show, onClose, title = "添加新活动" }) => {
            if (!show) return null;
            
            return (
                 <div className="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
                    <div className="bg-white rounded-lg shadow-xl p-8 w-full max-w-2xl">
                        <h2 className="text-xl font-bold text-gray-800 mb-6">{title}</h2>
                        <div className="space-y-4">
                             <div>
                                <label className="text-sm font-medium text-gray-700">活动名称</label>
                                <input type="text" placeholder="请输入活动名称" className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm" />
                            </div>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="text-sm font-medium text-gray-700">日期</label>
                                    <input type="text" placeholder="mm/dd/yyyy" className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm" />
                                </div>
                                <div>
                                    <label className="text-sm font-medium text-gray-700">场地</label>
                                     <select className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm text-gray-500">
                                        <option>选择场地</option>
                                    </select>
                                </div>
                            </div>
                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="text-sm font-medium text-gray-700">开始时间</label>
                                    <div className="relative mt-1">
                                      <input type="text" placeholder="--:--" className="block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm" />
                                      <i className="far fa-clock absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                    </div>
                                </div>
                                <div>
                                    <label className="text-sm font-medium text-gray-700">结束时间</label>
                                    <div className="relative mt-1">
                                      <input type="text" placeholder="--:--" className="block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm" />
                                      <i className="far fa-clock absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                             <div>
                                <label className="text-sm font-medium text-gray-700">参与上限</label>
                                <div className="flex items-center gap-4 mt-2">
                                    <input type="range" min="1" max="40" defaultValue="20" className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-500" />
                                    <span className="text-gray-700 font-medium">20人</span>
                                </div>
                            </div>
                            <div>
                                <label className="text-sm font-medium text-gray-700">活动类型</label>
                                <select className="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm">
                                    <option>友谊赛</option>
                                    <option>培训课</option>
                                </select>
                            </div>
                        </div>
                        <div className="flex justify-end gap-3 mt-8">
                            <button onClick={onClose} className="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">取消</button>
                            <button className="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-500 hover:bg-green-600">
                                <i className="fas fa-check mr-2"></i>创建活动
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        
        const DeleteConfirmationModal = ({ show, activity, onConfirm, onCancel }) => {
            if (!show || !activity) return null;

            return (
                 <div className="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50">
                    <div className="bg-white rounded-lg shadow-xl p-6 w-full max-w-md text-center">
                        <h2 className="text-lg font-semibold text-gray-800 mb-2">确认删除</h2>
                        <p className="text-gray-600 mb-6">您确定要删除活动“{activity.title}”吗？此操作无法撤销。</p>
                        <div className="flex justify-center gap-4">
                            <button onClick={onCancel} className="px-6 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">取消</button>
                            <button onClick={onConfirm} className="px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-500 hover:bg-red-600">确认删除</button>
                        </div>
                    </div>
                 </div>
            );
        };


        const App = () => {
            const [activities, setActivities] = useState(initialActivities);
            const [viewMode, setViewMode] = useState('dashboard'); // 'dashboard' or 'help'
            const [selectedActivityId, setSelectedActivityId] = useState(null);
            const [activityToDelete, setActivityToDelete] = useState(null);
            const [showNewActivityModal, setShowNewActivityModal] = useState(false);
            const [showHelpModal, setShowHelpModal] = useState(false);


            const handleSelectActivity = (id) => setSelectedActivityId(id);
            const handleCancelEdit = () => setSelectedActivityId(null);
            
            const handleShowDeleteModal = (id) => {
                const activity = activities.find(a => a.id === id);
                setActivityToDelete(activity);
            };
            const handleCancelDelete = () => setActivityToDelete(null);
            const handleConfirmDelete = () => {
                // In a real app, this would be an API call
                setActivities(activities.filter(a => a.id !== activityToDelete.id));
                setActivityToDelete(null);
                setSelectedActivityId(null);
            };

            const handleShowNewModal = () => setShowNewActivityModal(true);
            const handleCloseNewModal = () => setShowNewActivityModal(false);
            
            const handleShowHelp = () => {
                setViewMode('help');
                setSelectedActivityId(null);
            };
            const handleShowDashboard = () => setViewMode('dashboard');

            return (
                <div className="flex min-h-screen">
                    <Sidebar />
                    <div className="flex-grow ml-60 pb-16">
                      <TopBar onShowHelp={handleShowHelp} onShowDashboard={handleShowDashboard} />
                      {viewMode === 'dashboard' && (
                         <DashboardView
                            activities={activities}
                            selectedActivityId={selectedActivityId}
                            onSelect={handleSelectActivity}
                            onCancel={handleCancelEdit}
                            onDelete={handleShowDeleteModal}
                        />
                      )}
                      {viewMode === 'help' && (
                         <HelpView onShowNewModal={handleShowNewModal} />
                      )}

                       <FooterBar onShowNewModal={handleShowNewModal} />
                    </div>
                    
                    <DeleteConfirmationModal 
                        show={!!activityToDelete}
                        activity={activityToDelete}
                        onConfirm={handleConfirmDelete}
                        onCancel={handleCancelDelete}
                    />

                    <NewActivityModal 
                        show={showNewActivityModal && viewMode === 'dashboard'} 
                        onClose={handleCloseNewModal} 
                    />
                    
                    {/* Special modal for help view */}
                    {viewMode === 'help' && showNewActivityModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-30 z-40">
                             <NewActivityModal 
                                show={true} 
                                onClose={handleCloseNewModal}
                                title="帮助说明 > 添加新活动"
                             />
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);

    </script>

</body>
</html>