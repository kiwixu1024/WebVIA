<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>云存储</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
        }
    </style>
</head>

<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const initialPhotos = [
            { id: 'p1', title: 'Family_Vacation.jpg', date: '2023-06-10', tags: ['旅行', '家庭'], description: '去年的家庭旅行', src: 'https://picsum.photos/id/1018/400/300' },
            { id: 'p2', title: 'Beach_Sunset.jpg', date: '2023-06-08', tags: ['旅行', '风景'], src: 'https://picsum.photos/id/1050/400/300' },
            { id: 'p3', title: 'Mountain_Hiking.jpg', date: '2023-06-09', tags: ['运动', '风景'], src: 'https://picsum.photos/id/1051/400/300' },
            { id: 'p4', title: 'Birthday_Cake.jpg', date: '2023-06-12', tags: ['生日', '家庭'], src: 'https://picsum.photos/id/1074/400/300' },
            { id: 'p5', title: 'Office_Party.jpg', date: '2023-06-07', tags: ['工作', '聚会'], src: 'https://picsum.photos/id/119/400/300' },
        ];

        const initialVideos = [
            { id: 'v1', title: 'Birthday_Party.mp4', date: '2023-06-12', tags: ['生日', '家庭'], duration: '2:30', src: 'https://picsum.photos/id/10/400/300' },
            { id: 'v2', title: 'Vacation_Highlights.mp4', date: '2023-06-09', tags: ['旅行', '家庭'], duration: '5:12', src: 'https://picsum.photos/id/111/400/300' },
            { id: 'v3', title: 'Cooking_Tutorial.mp4', date: '2023-06-06', tags: ['烹饪', '教程'], duration: '10:45', src: 'https://picsum.photos/id/136/400/300' },
        ];

        const allTags = ["旅行", "家庭", "工作", "聚会", "运动", "风景", "生日", "教程", "烹饪", "生活"];


        function App() {
            const [modal, setModal] = useState({ type: null, data: null });
            
            const openModal = (type, data = null) => setModal({ type, data });
            const closeModal = () => setModal({ type: null, data: null });
            
            const handleEdit = (item) => openModal('editPhoto', item);
            const handleDelete = (item) => openModal('deletePhoto', item);
            
            return (
                <div className="flex h-screen bg-gray-50 text-gray-800">
                    <LeftSidebar />
                    <main className="flex-1 flex flex-col overflow-hidden">
                        <Header />
                        <div className="flex-1 overflow-y-auto p-6">
                            <MainContentHeader onAddPhoto={() => openModal('addPhoto')} onAddVideo={() => openModal('addVideo')} />
                            <div className="mt-6">
                                <h2 className="text-xl font-semibold text-gray-700">照片 ({initialPhotos.length})</h2>
                                <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 mt-4">
                                    {initialPhotos.map(photo => <FileCard key={photo.id} item={photo} onEdit={handleEdit} onDelete={handleDelete} type="photo"/>)}
                                </div>
                            </div>
                            <div className="mt-8">
                                <h2 className="text-xl font-semibold text-gray-700">视频 ({initialVideos.length})</h2>
                                <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 mt-4">
                                     {initialVideos.map(video => <FileCard key={video.id} item={video} type="video"/>)}
                                </div>
                            </div>
                            <Footer />
                        </div>
                    </main>
                    <RightSidebar />
                    {modal.type && <ModalContainer modal={modal} closeModal={closeModal} />}
                </div>
            );
        }

        function LeftSidebar() {
            return (
                <aside className="w-60 bg-white flex flex-col border-r border-gray-200">
                    <div className="h-16 flex items-center px-6 border-b border-gray-200">
                        <h1 className="text-xl font-bold text-blue-600">云存储</h1>
                    </div>
                    <nav className="flex-1 pt-6 px-4">
                        <ul>
                            <NavItem icon="fa-images" text="我的图库" active={true} />
                            <NavItem icon="fa-video" text="我的视频" />
                            <NavItem icon="fa-share-alt" text="分享中心" />
                            <NavItem icon="fa-cog" text="设置" />
                        </ul>
                    </nav>
                    <div className="p-4 border-t border-gray-200 text-xs text-gray-500">
                        <p>已用空间: 64.9 GB</p>
                        <p className="mt-1">剩余空间: 35.1 GB</p>
                    </div>
                </aside>
            );
        }

        function NavItem({ icon, text, active }) {
            const activeClasses = active ? 'bg-blue-50 text-blue-600 border-l-4 border-blue-600' : 'text-gray-600 hover:bg-gray-100';
            const padding = active ? 'pl-3' : 'pl-4';
            return (
                <li className="mb-2">
                    <a href="#" className={`flex items-center py-2.5 rounded-md transition-colors duration-200 ${activeClasses} ${padding}`}>
                        <i className={`fas ${icon} w-6 text-center`}></i>
                        <span className="ml-3 font-medium">{text}</span>
                    </a>
                </li>
            );
        }

        function Header() {
             const navs = ["全部文件", "相册管理", "智能分类", "回收站"];
             const activeNav = "全部文件";
            return (
                 <header className="h-16 bg-white border-b border-gray-200 flex items-center px-6">
                    <nav>
                        <ul className="flex items-center space-x-6">
                            {navs.map(nav => (
                                <li key={nav}>
                                    <a href="#" className={`text-base font-medium pb-5 ${activeNav === nav ? 'text-blue-600 border-b-2 border-blue-600' : 'text-gray-500 hover:text-gray-800'}`}>
                                        {nav}
                                    </a>
                                </li>
                            ))}
                        </ul>
                    </nav>
                </header>
            );
        }
        
        function MainContentHeader({ onAddPhoto, onAddVideo }) {
            return (
                <div className="flex justify-between items-center">
                    <h1 className="text-2xl font-bold text-gray-800">全部文件</h1>
                    <div className="flex space-x-3">
                        <button onClick={onAddPhoto} className="flex items-center bg-blue-50 text-blue-600 px-4 py-2 rounded-md hover:bg-blue-100 transition-colors">
                            <i className="fas fa-plus mr-2"></i>
                            <span>添加照片</span>
                        </button>
                        <button onClick={onAddVideo} className="flex items-center bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors">
                            <i className="fas fa-upload mr-2"></i>
                            <span>上传视频</span>
                        </button>
                    </div>
                </div>
            );
        }
        
        function FileCard({ item, type, onEdit, onDelete }) {
            const [menuOpen, setMenuOpen] = useState(false);
            const menuRef = useRef(null);

            useEffect(() => {
                function handleClickOutside(event) {
                    if (menuRef.current && !menuRef.current.contains(event.target)) {
                        setMenuOpen(false);
                    }
                }
                document.addEventListener("mousedown", handleClickOutside);
                return () => document.removeEventListener("mousedown", handleClickOutside);
            }, [menuRef]);
            
            return (
                <div className="bg-white rounded-lg shadow-sm overflow-hidden group relative hover:shadow-md transition-shadow">
                    <div className="relative">
                        <img src={item.src} alt={item.title} className="w-full h-36 object-cover" />
                        {type === 'video' && (
                             <div className="absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center">
                                <div className="w-10 h-10 bg-black bg-opacity-50 rounded-full flex items-center justify-center">
                                    <i className="fas fa-play text-white ml-1"></i>
                                </div>
                            </div>
                        )}
                        {item.duration && (
                            <span className="absolute bottom-2 right-2 bg-black bg-opacity-60 text-white text-xs px-1.5 py-0.5 rounded">
                                {item.duration}
                            </span>
                        )}
                    </div>
                    <div className="p-3">
                        <h3 className="font-semibold text-sm truncate">{item.title}</h3>
                        <p className="text-xs text-gray-500 mt-1">{item.date}</p>
                        <div className="mt-2 flex space-x-2">
                            {item.tags.map(tag => (
                                <span key={tag} className="bg-gray-100 text-gray-600 text-xs px-2 py-0.5 rounded-full">{tag}</span>
                            ))}
                        </div>
                    </div>
                    { type === 'photo' && (
                        <div className="absolute top-2 right-2">
                             <button onClick={() => setMenuOpen(!menuOpen)} className="w-7 h-7 bg-white/70 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity focus:opacity-100">
                                <i className="fas fa-ellipsis-h text-gray-600"></i>
                             </button>
                             {menuOpen && (
                                <div ref={menuRef} className="absolute right-0 mt-2 w-28 bg-white rounded-md shadow-lg z-10 py-1">
                                    <a href="#" onClick={(e) => { e.preventDefault(); onEdit(item); setMenuOpen(false); }} className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">编辑</a>
                                    <a href="#" onClick={(e) => { e.preventDefault(); onDelete(item); setMenuOpen(false); }} className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">删除</a>
                                </div>
                             )}
                        </div>
                    )}
                </div>
            );
        }

        function Footer() {
            return(
                <footer className="mt-12 text-xs text-gray-500 border-t border-gray-200 pt-6">
                    <div className="flex justify-between">
                        <div>
                            <h4 className="font-semibold text-gray-600 mb-2">操作指南</h4>
                            <a href="#" className="text-blue-500 hover:underline">如何批量文件?</a>
                            <a href="#" className="ml-4 text-blue-500 hover:underline">如何分享给朋友?</a>
                            <a href="#" className="ml-4 text-blue-500 hover:underline">常见问题FAQ</a>
                        </div>
                        <div>
                            <h4 className="font-semibold text-gray-600 mb-2">产品特性</h4>
                            <span className="flex items-center"><i className="fas fa-shield-alt text-blue-500 mr-2"></i>云端加密</span>
                            <span className="flex items-center mt-1"><i className="fas fa-cogs text-blue-500 mr-2"></i>安全备份</span>
                            <span className="flex items-center mt-1"><i className="fas fa-sync-alt text-blue-500 mr-2"></i>跨设备同步</span>
                        </div>
                    </div>
                </footer>
            );
        }


        function RightSidebar() {
            const tags = [
                { name: '旅行', count: 5 }, { name: '家庭', count: 4 }, { name: '生日', count: 2 },
                { name: '工作', count: 1 }, { name: '聚会', count: 1 }, { name: '风景', count: 2 },
                { name: '运动', count: 1 }, { name: '烹饪', count: 1 }, { name: '教程', count: 1 }
            ];
            
            return(
                <aside className="w-72 bg-white flex flex-col border-l border-gray-200 p-6">
                     <div className="h-16 flex items-center -mt-6 -mx-6 px-6 mb-6"></div>
                    <div>
                        <h3 className="text-base font-semibold text-gray-700">存储统计</h3>
                        <div className="mt-4">
                            <div className="flex justify-between items-center text-sm text-gray-500">
                                <span>已使用空间</span>
                                <span className="font-semibold text-gray-700">65%</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2 mt-2">
                                <div className="bg-blue-500 h-2 rounded-full" style={{width: "65%"}}></div>
                            </div>
                             <div className="flex justify-between items-center text-xs text-gray-400 mt-1">
                                <span>已用: 64.9 GB</span>
                                <span>总计: 100 GB</span>
                            </div>
                        </div>
                    </div>

                    <div className="mt-8">
                        <h3 className="text-base font-semibold text-gray-700">文件分布</h3>
                        <div className="space-y-3 mt-4">
                            <div className="flex items-center justify-between text-sm">
                                <div className="flex items-center">
                                    <i className="fas fa-image text-blue-500 w-5 text-center"></i>
                                    <span className="ml-3">照片</span>
                                </div>
                                <span className="font-medium">5 张</span>
                            </div>
                            <div className="flex items-center justify-between text-sm">
                                <div className="flex items-center">
                                    <i className="fas fa-video text-red-500 w-5 text-center"></i>
                                    <span className="ml-3">视频</span>
                                </div>
                                <span className="font-medium">3 个</span>
                            </div>
                        </div>
                    </div>
                    
                    <div className="mt-8">
                        <h3 className="text-base font-semibold text-gray-700">热门标签</h3>
                         <div className="flex flex-wrap gap-2 mt-4">
                            {tags.map(tag => (
                                <span key={tag.name} className="bg-gray-100 text-gray-600 text-xs px-2.5 py-1 rounded-full">{tag.name} ({tag.count})</span>
                            ))}
                        </div>
                    </div>

                    <div className="mt-8">
                         <h3 className="text-base font-semibold text-gray-700">近期上传趋势</h3>
                         <div className="flex justify-around items-end h-20 mt-4 text-xs text-gray-500">
                            <div className="flex flex-col items-center"><div className="w-3 bg-blue-200 h-10 rounded-t-sm"></div><span>二</span></div>
                            <div className="flex flex-col items-center"><div className="w-3 bg-blue-200 h-16 rounded-t-sm"></div><span>三</span></div>
                            <div className="flex flex-col items-center"><div className="w-3 bg-blue-200 h-8 rounded-t-sm"></div><span>四</span></div>
                            <div className="flex flex-col items-center"><div className="w-3 bg-blue-200 h-12 rounded-t-sm"></div><span>五</span></div>
                            <div className="flex flex-col items-center"><div className="w-3 bg-blue-200 h-5 rounded-t-sm"></div><span>六</span></div>
                            <div className="flex flex-col items-center"><div className="w-3 bg-blue-200 h-3 rounded-t-sm"></div><span>日</span></div>
                            <div className="flex flex-col items-center"><div className="w-3 bg-blue-200 h-9 rounded-t-sm"></div><span>一</span></div>
                         </div>
                    </div>
                </aside>
            );
        }

        function ModalContainer({ modal, closeModal }) {
            if (!modal.type) return null;

            const modalContent = () => {
                switch(modal.type) {
                    case 'addPhoto':
                        return <UploadModal title="添加照片" itemType="照片" onCancel={closeModal} />;
                    case 'addVideo':
                        return <UploadModal title="上传视频" itemType="视频" onCancel={closeModal} />;
                    case 'editPhoto':
                        return <EditModal item={modal.data} onCancel={closeModal} />;
                    case 'deletePhoto':
                        return <DeleteConfirmModal item={modal.data} onCancel={closeModal} />;
                    default:
                        return null;
                }
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                    {modalContent()}
                </div>
            );
        }

        function UploadModal({ title, itemType, onCancel }) {
            return (
                <div className="bg-white rounded-lg shadow-xl w-full max-w-lg mx-4">
                    <div className="flex justify-between items-center p-5 border-b">
                        <h2 className="text-lg font-semibold text-gray-800">{title}</h2>
                        <button onClick={onCancel} className="text-gray-400 hover:text-gray-600">
                            <i className="fas fa-times"></i>
                        </button>
                    </div>
                    <div className="p-6">
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">{itemType}标题</label>
                            <input type="text" className="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500" />
                        </div>
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">描述</label>
                            <textarea rows="3" className="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500"></textarea>
                        </div>
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">上传{itemType}</label>
                            <div className="mt-1 flex justify-center px-6 pt-8 pb-8 border-2 border-gray-300 border-dashed rounded-md">
                                <div className="space-y-1 text-center">
                                    <i className="fas fa-cloud-upload-alt text-4xl text-gray-400"></i>
                                    <p className="text-sm text-gray-600">点击或将{itemType}拖拽到此处</p>
                                </div>
                            </div>
                        </div>
                         <div className="mb-6">
                            <label className="block text-sm font-medium text-gray-700 mb-2">标签</label>
                            <div className="flex flex-wrap gap-2">
                                {allTags.slice(0, 8).map(tag => <button key={tag} className="bg-gray-200 text-gray-700 text-sm px-3 py-1 rounded-full hover:bg-gray-300">{tag}</button>)}
                            </div>
                        </div>
                        <div className="flex justify-end space-x-3">
                            <button onClick={onCancel} className="px-5 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">取消</button>
                            <button onClick={onCancel} className="px-5 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700">上传</button>
                        </div>
                    </div>
                </div>
            )
        }
        
        function EditModal({ item, onCancel }) {
            const [activeTags, setActiveTags] = useState(item.tags || []);
            
            const toggleTag = (tag) => {
                setActiveTags(prev => prev.includes(tag) ? prev.filter(t => t !== tag) : [...prev, tag]);
            };

            return (
                 <div className="bg-white rounded-lg shadow-xl w-full max-w-lg mx-4">
                    <div className="flex justify-between items-center p-5 border-b">
                        <h2 className="text-lg font-semibold text-gray-800">编辑照片</h2>
                        <button onClick={onCancel} className="text-gray-400 hover:text-gray-600">
                            <i className="fas fa-times"></i>
                        </button>
                    </div>
                    <div className="p-6">
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">标题</label>
                            <input type="text" defaultValue={item.title} className="w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-1 focus:ring-blue-500" />
                        </div>
                        <div className="mb-4">
                            <label className="block text-sm font-medium text-gray-700 mb-1">描述</label>
                            <textarea rows="3" defaultValue={item.description} className="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-blue-500"></textarea>
                        </div>
                         <div className="mb-6">
                            <label className="block text-sm font-medium text-gray-700 mb-2">标签</label>
                            <div className="flex flex-wrap gap-2">
                                {allTags.slice(0, 8).map(tag => {
                                    const isActive = activeTags.includes(tag);
                                    return <button key={tag} onClick={() => toggleTag(tag)} className={`text-sm px-3 py-1 rounded-full ${isActive ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}`}>{tag}</button>
                                })}
                            </div>
                        </div>
                        <div className="flex justify-end space-x-3">
                            <button onClick={onCancel} className="px-5 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">取消</button>
                            <button onClick={onCancel} className="px-5 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700">保存</button>
                        </div>
                    </div>
                </div>
            );
        }

        function DeleteConfirmModal({ item, onCancel }) {
            return (
                <div className="bg-white rounded-lg shadow-xl w-full max-w-md mx-4 p-6 text-center">
                    <div className="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100">
                        <i className="fas fa-exclamation-triangle text-red-600 text-xl"></i>
                    </div>
                    <h3 className="text-lg font-medium text-gray-900 mt-5">确认删除</h3>
                    <div className="mt-2 px-4">
                        <p className="text-sm text-gray-500">
                           您确定要删除 “{item.title}” 吗? 此操作不可撤销。
                        </p>
                    </div>
                    <div className="mt-6 flex justify-center space-x-4">
                        <button onClick={onCancel} className="px-6 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                            取消
                        </button>
                        <button onClick={onCancel} className="px-6 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700">
                            确认删除
                        </button>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>

</html>