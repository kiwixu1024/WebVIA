<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>家庭理财计划</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        const App = () => {
            const [showAddModal, setShowAddModal] = useState(false);
            const [showEditModal, setShowEditModal] = useState(false);
            const [selectedBill, setSelectedBill] = useState(null);
            const [bills, setBills] = useState([
                { id: 1, date: '2023-10-15', type: '餐饮', amount: -200, category: '家庭餐饮', editable: true },
                { id: 2, date: '2023-10-10', type: '交通', amount: -50, category: '地铁月票', editable: true },
                { id: 3, date: '2023-10-05', type: '收入', amount: 10000, category: '工资', editable: true },
                { id: 4, date: '2023-10-03', type: '购物', amount: -1500, category: '生活用品', editable: true },
                { id: 5, date: '2023-09-28', type: '家庭支出', amount: -2000, category: '水电费', editable: true }
            ]);
            
            const handleAddBill = (newBill) => {
                setBills([...bills, { 
                    id: Date.now(), 
                    date: newBill.date,
                    type: newBill.type,
                    amount: newBill.amount,
                    category: newBill.category,
                    editable: true
                }]);
                setShowAddModal(false);
            };
            
            const handleEditBill = (bill) => {
                setSelectedBill(bill);
                setShowEditModal(true);
            };
            
            const handleSaveEdit = (editedBill) => {
                const updatedBills = bills.map(bill => 
                    bill.id === editedBill.id ? { ...bill, ...editedBill } : bill
                );
                setBills(updatedBills);
                setShowEditModal(false);
            };

            const handleAddNewBill = () => {
                setSelectedBill(null);
                setShowAddModal(true);
            };
            
            return (
                <div className="flex flex-col h-screen">
                    {/* 顶部导航 */}
                    <div className="bg-gradient-to-r from-blue-500 to-orange-400">
                        <div className="container mx-auto px-4 py-3">
                            <div className="flex justify-between items-center">
                                <div className="text-white font-bold text-xl">家庭理财计划</div>
                            </div>
                            <div className="flex space-x-6 text-white text-sm mt-2">
                                <div className="flex items-center">
                                    <i className="fas fa-chart-line mr-2"></i>
                                    <span>可视化家庭理财-站式管理</span>
                                </div>
                                <div className="flex items-center">
                                    <i className="fas fa-database mr-2"></i>
                                    <span>实时数据统计与可视制报表</span>
                                </div>
                                <div className="flex items-center">
                                    <i className="fas fa-shield-alt mr-2"></i>
                                    <span>安全便捷，支持多端同步</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div className="flex flex-1">
                        {/* 侧边栏 */}
                        <div className="w-40 bg-gray-100 border-r">
                            <div className="p-4">
                                <div className="flex items-center justify-between py-2 text-gray-700 hover:bg-gray-200 px-2 rounded cursor-pointer">
                                    <span>仪表板</span>
                                    <i className="fas fa-chevron-down"></i>
                                </div>
                                <div className="flex items-center justify-between py-2 text-gray-700 hover:bg-gray-200 px-2 rounded cursor-pointer">
                                    <span>账单记录</span>
                                    <i className="fas fa-chevron-down"></i>
                                </div>
                                <div className="flex items-center justify-between py-2 text-gray-700 hover:bg-gray-200 px-2 rounded cursor-pointer">
                                    <span>资产负债</span>
                                    <i className="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>

                        {/* 主内容区域 */}
                        <div className="flex-1 bg-gray-200 overflow-auto">
                            {/* 顶部标签页 */}
                            <div className="bg-white border-b">
                                <div className="flex text-sm">
                                    <div className="px-6 py-3 border-b-2 border-orange-400 text-orange-500 flex items-center">
                                        <i className="fas fa-home mr-2"></i>
                                        <span>主页</span>
                                    </div>
                                    <div className="px-6 py-3 text-gray-600 flex items-center">
                                        <i className="fas fa-arrow-down mr-2"></i>
                                        <span>收入</span>
                                    </div>
                                    <div className="px-6 py-3 text-gray-600 flex items-center">
                                        <i className="fas fa-arrow-up mr-2"></i>
                                        <span>支出</span>
                                    </div>
                                    <div className="px-6 py-3 text-gray-600 flex items-center">
                                        <i className="fas fa-balance-scale mr-2"></i>
                                        <span>借贷</span>
                                    </div>
                                    <div className="px-6 py-3 text-gray-600 flex items-center">
                                        <i className="fas fa-chart-line mr-2"></i>
                                        <span>投资</span>
                                    </div>
                                </div>
                            </div>

                            <div className="p-4">
                                {/* 操作按钮区 */}
                                <div className="mb-4 flex space-x-2">
                                    <button 
                                        className="bg-orange-500 hover:bg-orange-600 text-white py-1 px-3 rounded flex items-center text-sm"
                                        onClick={handleAddNewBill}
                                    >
                                        <i className="fas fa-plus-circle mr-2"></i> 添加账单
                                    </button>
                                    <button className="bg-orange-500 hover:bg-orange-600 text-white py-1 px-3 rounded flex items-center text-sm">
                                        <i className="fas fa-filter mr-2"></i> 筛选账单
                                    </button>
                                    <button className="bg-orange-500 hover:bg-orange-600 text-white py-1 px-3 rounded flex items-center text-sm">
                                        <i className="fas fa-plus mr-2"></i> 添加理财产品
                                    </button>
                                </div>

                                {/* 账单列表 */}
                                <div className="bg-white rounded-md shadow-sm mb-4">
                                    <div className="p-4">
                                        <table className="w-full">
                                            <tbody>
                                                {bills.map((bill) => (
                                                    <tr key={bill.id} className="border-b hover:bg-gray-50 cursor-pointer" onClick={() => handleEditBill(bill)}>
                                                        <td className="py-3 w-32">{bill.date}</td>
                                                        <td className="py-3 w-24">{bill.type}</td>
                                                        <td className={`py-3 w-24 ${bill.amount > 0 ? 'text-green-500' : 'text-red-500'}`}>
                                                            {bill.amount > 0 ? `+${bill.amount}` : bill.amount}
                                                        </td>
                                                        <td className="py-3">{bill.category}</td>
                                                        <td className="py-3 w-8 text-right">
                                                            {bill.editable && (
                                                                <i className="fas fa-edit text-gray-400 hover:text-orange-500"></i>
                                                            )}
                                                        </td>
                                                        <td className="py-3 w-8 text-right">
                                                            <i className="fas fa-trash-alt text-gray-400 hover:text-orange-500"></i>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                                {/* 右侧区域 - 图表和理财小贴士 */}
                                <div className="flex flex-col md:flex-row md:space-x-4">
                                    {/* 图表区域 */}
                                    <div className="bg-white rounded-md shadow-sm p-4 mb-4 md:mb-0 md:w-1/2">
                                        <div className="flex justify-between items-center mb-2">
                                            <h3 className="text-lg font-semibold">月度趋势</h3>
                                        </div>
                                        <div className="h-40">
                                            <img src="https://picsum.photos/id/26/600/200" alt="月度趋势图表" className="w-full h-full object-cover" />
                                        </div>
                                    </div>

                                    {/* 理财小贴士 */}
                                    <div className="bg-white rounded-md shadow-sm p-4 md:w-1/2">
                                        <h3 className="text-lg font-semibold mb-2">理财小贴士</h3>
                                        <ul className="space-y-2">
                                            <li className="flex items-start">
                                                <div className="flex-shrink-0 bg-green-500 rounded-full p-1 mr-2 mt-0.5">
                                                    <i className="fas fa-check text-xs text-white"></i>
                                                </div>
                                                <span className="text-sm">制定合理预算，量入为出是理财基础。</span>
                                            </li>
                                            <li className="flex items-start">
                                                <div className="flex-shrink-0 bg-green-500 rounded-full p-1 mr-2 mt-0.5">
                                                    <i className="fas fa-check text-xs text-white"></i>
                                                </div>
                                                <span className="text-sm">建立应急储备，至少准备3-6个月生活费。</span>
                                            </li>
                                            <li className="flex items-start">
                                                <div className="flex-shrink-0 bg-green-500 rounded-full p-1 mr-2 mt-0.5">
                                                    <i className="fas fa-check text-xs text-white"></i>
                                                </div>
                                                <span className="text-sm">分散投资，不要把所有鸡蛋放在一个篮子里。</span>
                                            </li>
                                            <li className="flex items-start">
                                                <div className="flex-shrink-0 bg-green-500 rounded-full p-1 mr-2 mt-0.5">
                                                    <i className="fas fa-check text-xs text-white"></i>
                                                </div>
                                                <span className="text-sm">定期检查财务状况，及时调整理财策略。</span>
                                            </li>
                                            <li className="flex items-start">
                                                <div className="flex-shrink-0 bg-green-500 rounded-full p-1 mr-2 mt-0.5">
                                                    <i className="fas fa-check text-xs text-white"></i>
                                                </div>
                                                <span className="text-sm">提早规划退休金，越早开始越能享受复利。</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                {/* 推荐理财产品 */}
                                <div className="mt-4">
                                    <h3 className="text-lg font-semibold mb-2">推荐理财产品</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        {/* 余额宝 */}
                                        <div className="bg-white rounded-md shadow-sm p-4">
                                            <div className="flex justify-between items-center mb-2">
                                                <h4 className="text-md font-semibold">余额宝</h4>
                                                <div className="flex">
                                                    <i className="fas fa-edit text-gray-400 hover:text-orange-500 mr-2"></i>
                                                    <i className="fas fa-trash-alt text-gray-400 hover:text-orange-500"></i>
                                                </div>
                                            </div>
                                            <div className="flex items-center mb-1">
                                                <span className="text-sm text-gray-500 mr-2">预期收益:</span>
                                                <span className="text-orange-500 font-semibold">2.5%</span>
                                                <span className="text-gray-500 text-sm ml-2">/ 风险: 低</span>
                                            </div>
                                            <div className="text-xs text-gray-500 mb-2">灵活存取，日收益结算</div>
                                            <div className="text-blue-500 text-sm">查看详情 <i className="fas fa-chevron-right text-xs"></i></div>
                                        </div>

                                        {/* 指数基金 */}
                                        <div className="bg-white rounded-md shadow-sm p-4">
                                            <div className="flex justify-between items-center mb-2">
                                                <h4 className="text-md font-semibold">指数基金</h4>
                                                <div className="flex">
                                                    <i className="fas fa-edit text-gray-400 hover:text-orange-500 mr-2"></i>
                                                    <i className="fas fa-trash-alt text-gray-400 hover:text-orange-500"></i>
                                                </div>
                                            </div>
                                            <div className="flex items-center mb-1">
                                                <span className="text-sm text-gray-500 mr-2">预期收益:</span>
                                                <span className="text-orange-500 font-semibold">6.0%</span>
                                                <span className="text-gray-500 text-sm ml-2">/ 风险: 中</span>
                                            </div>
                                            <div className="text-xs text-gray-500 mb-2">长期投资，跟踪市场指数</div>
                                            <div className="text-blue-500 text-sm">查看详情 <i className="fas fa-chevron-right text-xs"></i></div>
                                        </div>

                                        {/* 定期存款 */}
                                        <div className="bg-white rounded-md shadow-sm p-4">
                                            <div className="flex justify-between items-center mb-2">
                                                <h4 className="text-md font-semibold">定期存款</h4>
                                                <div className="flex">
                                                    <i className="fas fa-edit text-gray-400 hover:text-orange-500 mr-2"></i>
                                                    <i className="fas fa-trash-alt text-gray-400 hover:text-orange-500"></i>
                                                </div>
                                            </div>
                                            <div className="flex items-center mb-1">
                                                <span className="text-sm text-gray-500 mr-2">预期收益:</span>
                                                <span className="text-orange-500 font-semibold">3.5%</span>
                                                <span className="text-gray-500 text-sm ml-2">/ 风险: 低</span>
                                            </div>
                                            <div className="text-xs text-gray-500 mb-2">稳健收益，固定期限</div>
                                            <div className="text-blue-500 text-sm">查看详情 <i className="fas fa-chevron-right text-xs"></i></div>
                                        </div>
                                    </div>
                                </div>

                                {/* 操作指引 */}
                                <div className="mt-4">
                                    <h3 className="text-lg font-semibold mb-2">操作指引</h3>
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        {/* 添加记录 */}
                                        <div className="bg-white rounded-md shadow-sm p-4 flex flex-col items-center justify-center">
                                            <div className="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-2">
                                                <i className="fas fa-plus text-blue-500 text-2xl"></i>
                                            </div>
                                            <h4 className="text-md font-semibold mb-1">添加记录</h4>
                                            <p className="text-xs text-gray-500 text-center">点击顶部的"添加账单"，"账单描述""金额"等必填项，填写完成点击保存。</p>
                                        </div>

                                        {/* 编辑记录 */}
                                        <div className="bg-white rounded-md shadow-sm p-4 flex flex-col items-center justify-center">
                                            <div className="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-2">
                                                <i className="fas fa-edit text-orange-500 text-2xl"></i>
                                            </div>
                                            <h4 className="text-md font-semibold mb-1">编辑记录</h4>
                                            <p className="text-xs text-gray-500 text-center">点击记录右上角的编辑图标或直接点击记录，修改完成后点击保存更新记录。</p>
                                        </div>

                                        {/* 删除记录 */}
                                        <div className="bg-white rounded-md shadow-sm p-4 flex flex-col items-center justify-center">
                                            <div className="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-2">
                                                <i className="fas fa-trash-alt text-red-500 text-2xl"></i>
                                            </div>
                                            <h4 className="text-md font-semibold mb-1">删除记录</h4>
                                            <p className="text-xs text-gray-500 text-center">点击记录右上角的删除图标，在确认提示中点击"确定"即可删除记录。</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* 页脚 */}
                            <div className="bg-white p-4 text-center text-xs text-gray-500 border-t">
                                © 2023 家庭理财计划 版权所有
                                <div className="mt-1">
                                    <span className="mx-2">帮助中心</span>
                                    <span className="mx-2">联系我们</span>
                                    <span className="mx-2">隐私政策</span>
                                </div>
                            </div>
                        </div>

                        {/* 侧边栏小组件 */}
                        <div className="w-40 bg-gray-100 border-l hidden sm:block">
                            <div className="p-3 border-b">
                                <div className="text-sm font-semibold">理财小助手</div>
                                <div className="text-xs text-gray-500 mt-2">
                                    您本月开支已达预算的80%，请合理安排支出。
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* 添加账单模态框 */}
                    {showAddModal && (
                        <AddBillModal 
                            onClose={() => setShowAddModal(false)} 
                            onSave={handleAddBill}
                        />
                    )}

                    {/* 编辑账单模态框 */}
                    {showEditModal && selectedBill && (
                        <EditBillModal
                            bill={selectedBill}
                            onClose={() => setShowEditModal(false)}
                            onSave={handleSaveEdit}
                        />
                    )}
                </div>
            );
        };

        // 添加账单模态框组件
        const AddBillModal = ({ onClose, onSave }) => {
            const [formData, setFormData] = useState({
                date: new Date().toISOString().split('T')[0],
                type: '收入',
                amount: '',
                category: '测试账单'
            });

            const handleChange = (e) => {
                const { name, value } = e.target;
                setFormData({ ...formData, [name]: value });
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                // 如果是收入，确保金额为正数；如果是支出，确保金额为负数
                let amount = parseFloat(formData.amount);
                if (formData.type === '收入' && amount < 0) {
                    amount = Math.abs(amount);
                } else if (formData.type !== '收入' && amount > 0) {
                    amount = -Math.abs(amount);
                }
                onSave({ ...formData, amount });
            };

            return (
                <div className="fixed inset-0 flex items-center justify-center z-50 modal-backdrop">
                    <div className="bg-white rounded-lg shadow-lg w-full max-w-md">
                        <div className="flex justify-between items-center border-b px-4 py-3">
                            <h3 className="text-lg font-semibold">添加账单记录</h3>
                            <button onClick={onClose} className="text-gray-400 hover:text-gray-600">
                                <i className="fas fa-times"></i>
                            </button>
                        </div>
                        <form onSubmit={handleSubmit}>
                            <div className="p-4">
                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-700 mb-1">日期</label>
                                    <div className="relative">
                                        <input
                                            type="date"
                                            name="date"
                                            value={formData.date}
                                            onChange={handleChange}
                                            className="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        />
                                        <div className="absolute right-2 top-2 text-gray-400">
                                            <i className="far fa-calendar"></i>
                                        </div>
                                    </div>
                                </div>
                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-700 mb-1">类别</label>
                                    <div className="relative">
                                        <select
                                            name="type"
                                            value={formData.type}
                                            onChange={handleChange}
                                            className="w-full border rounded-md px-3 py-2 appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        >
                                            <option value="收入">收入</option>
                                            <option value="餐饮">餐饮</option>
                                            <option value="交通">交通</option>
                                            <option value="购物">购物</option>
                                            <option value="家庭支出">家庭支出</option>
                                        </select>
                                        <div className="absolute right-2 top-2 text-gray-400 pointer-events-none">
                                            <i className="fas fa-chevron-down"></i>
                                        </div>
                                    </div>
                                </div>
                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-700 mb-1">金额 (¥)</label>
                                    <input
                                        type="number"
                                        name="amount"
                                        value={formData.amount}
                                        onChange={handleChange}
                                        placeholder="收入为正数，支出为负数"
                                        className="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    />
                                </div>
                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-700 mb-1">备注</label>
                                    <textarea
                                        name="category"
                                        value={formData.category}
                                        onChange={handleChange}
                                        placeholder="账单备注"
                                        rows="2"
                                        className="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    ></textarea>
                                </div>
                            </div>
                            <div className="border-t px-4 py-3 flex justify-end space-x-3">
                                <button
                                    type="button"
                                    onClick={onClose}
                                    className="px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-100"
                                >
                                    取消
                                </button>
                                <button
                                    type="submit"
                                    className="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"
                                >
                                    保存
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        };

        // 编辑账单模态框组件
        const EditBillModal = ({ bill, onClose, onSave }) => {
            const [formData, setFormData] = useState({
                ...bill,
                date: bill.date
            });

            const handleChange = (e) => {
                const { name, value } = e.target;
                setFormData({ ...formData, [name]: value });
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                // 保持金额的正负性与类型一致
                let amount = parseFloat(formData.amount);
                if (formData.type === '收入' && amount < 0) {
                    amount = Math.abs(amount);
                } else if (formData.type !== '收入' && amount > 0) {
                    amount = -Math.abs(amount);
                }
                onSave({ ...formData, amount });
            };

            return (
                <div className="fixed inset-0 flex items-center justify-center z-50 modal-backdrop">
                    <div className="bg-white rounded-lg shadow-lg w-full max-w-md">
                        <div className="flex justify-between items-center border-b px-4 py-3">
                            <h3 className="text-lg font-semibold">编辑账单记录</h3>
                            <button onClick={onClose} className="text-gray-400 hover:text-gray-600">
                                <i className="fas fa-times"></i>
                            </button>
                        </div>
                        <form onSubmit={handleSubmit}>
                            <div className="p-4">
                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-700 mb-1">日期</label>
                                    <div className="relative">
                                        <input
                                            type="date"
                                            name="date"
                                            value={formData.date}
                                            onChange={handleChange}
                                            className="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        />
                                        <div className="absolute right-2 top-2 text-gray-400">
                                            <i className="far fa-calendar"></i>
                                        </div>
                                    </div>
                                </div>
                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-700 mb-1">类别</label>
                                    <div className="relative">
                                        <select
                                            name="type"
                                            value={formData.type}
                                            onChange={handleChange}
                                            className="w-full border rounded-md px-3 py-2 appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500"
                                        >
                                            <option value="收入">收入</option>
                                            <option value="餐饮">餐饮</option>
                                            <option value="交通">交通</option>
                                            <option value="购物">购物</option>
                                            <option value="家庭支出">家庭支出</option>
                                        </select>
                                        <div className="absolute right-2 top-2 text-gray-400 pointer-events-none">
                                            <i className="fas fa-chevron-down"></i>
                                        </div>
                                    </div>
                                </div>
                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-700 mb-1">金额 (¥)</label>
                                    <input
                                        type="number"
                                        name="amount"
                                        value={formData.amount}
                                        onChange={handleChange}
                                        className="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    />
                                </div>
                                <div className="mb-4">
                                    <label className="block text-sm font-medium text-gray-700 mb-1">备注</label>
                                    <textarea
                                        name="category"
                                        value={formData.category}
                                        onChange={handleChange}
                                        rows="2"
                                        className="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    ></textarea>
                                </div>
                            </div>
                            <div className="border-t px-4 py-3 flex justify-end space-x-3">
                                <button
                                    type="button"
                                    onClick={onClose}
                                    className="px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-100"
                                >
                                    取消
                                </button>
                                <button
                                    type="submit"
                                    className="px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"
                                >
                                    保存
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>