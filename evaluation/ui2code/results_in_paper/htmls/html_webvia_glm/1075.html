<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>家庭愿望清单</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/react@18.0.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.0.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; }
    </style>
</head>
<body class="bg-yellow-50 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function WishlistApp() {
            const [wishes, setWishes] = useState([
                {
                    id: 1,
                    title: "家庭电影之夜",
                    deadline: "2023年9月21日",
                    description: "每人选一部最喜欢的电影，准备爆米花和饮料，享受家庭电影时光",
                    priority: "低",
                    status: "已完成",
                    completed: true
                },
                {
                    id: 2,
                    title: "家庭周末野餐",
                    deadline: "2023年9月29日",
                    description: "带上野餐垫和最爱的零食，去城市公园野餐",
                    priority: "高",
                    status: "未完成",
                    completed: false
                },
                {
                    id: 3,
                    title: "孩子生日派对",
                    deadline: "2023年10月14日",
                    description: "为孩子准备一个主题派对，邀请他的好朋友来参加",
                    priority: "中",
                    status: "未完成",
                    completed: false
                }
            ]);

            const [filteredWishes, setFilteredWishes] = useState(wishes);
            const [searchTerm, setSearchTerm] = useState("");
            const [statusFilter, setStatusFilter] = useState("全部显示");
            const [sortBy, setSortBy] = useState("时间");
            const [showAddModal, setShowAddModal] = useState(false);
            const [showEditModal, setShowEditModal] = useState(false);
            const [editingWish, setEditingWish] = useState(null);
            const [newWish, setNewWish] = useState({
                title: "",
                deadline: "",
                priority: "中",
                description: ""
            });

            useEffect(() => {
                let filtered = wishes;

                // 搜索过滤
                if (searchTerm) {
                    filtered = filtered.filter(wish => 
                        wish.title.includes(searchTerm) || 
                        wish.description.includes(searchTerm)
                    );
                }

                // 状态过滤
                if (statusFilter === "未完成") {
                    filtered = filtered.filter(wish => !wish.completed);
                } else if (statusFilter === "已完成") {
                    filtered = filtered.filter(wish => wish.completed);
                }

                // 排序
                if (sortBy === "优先级") {
                    filtered = [...filtered].sort((a, b) => {
                        const priorityOrder = { "高": 3, "中": 2, "低": 1 };
                        return priorityOrder[b.priority] - priorityOrder[a.priority];
                    });
                }

                setFilteredWishes(filtered);
            }, [wishes, searchTerm, statusFilter, sortBy]);

            const totalWishes = wishes.length;
            const completedCount = wishes.filter(w => w.completed).length;
            const completionRate = totalWishes > 0 ? Math.round((completedCount / totalWishes) * 100) : 0;
            const todayExpired = wishes.filter(w => !w.completed && new Date(w.deadline.replace(/\//g, "-")) < new Date()).length;

            const handleAddWish = () => {
                if (!newWish.title.trim()) return;
                
                const wish = {
                    id: Date.now(),
                    ...newWish,
                    status: "未完成",
                    completed: false
                };
                setWishes([...wishes, wish]);
                setNewWish({ title: "", deadline: "", priority: "中", description: "" });
                setShowAddModal(false);
            };

            const handleEditWish = (wish) => {
                setEditingWish({...wish});
                setShowEditModal(true);
            };

            const handleSaveEdit = () => {
                setWishes(wishes.map(w => 
                    w.id === editingWish.id 
                        ? {...editingWish, status: editingWish.completed ? "已完成" : "未完成"}
                        : w
                ));
                setShowEditModal(false);
                setEditingWish(null);
            };

            const toggleWishStatus = (id) => {
                setWishes(wishes.map(wish => 
                    wish.id === id 
                        ? {...wish, completed: !wish.completed, status: wish.completed ? "未完成" : "已完成"}
                        : wish
                ));
            };

            const deleteWish = (id) => {
                setWishes(wishes.filter(w => w.id !== id));
            };

            return (
                <div className="min-h-screen bg-yellow-50">
                    {/* Header */}
                    <header className="bg-gradient-to-r from-orange-200 to-yellow-300 p-4">
                        <div className="flex justify-between items-center max-w-7xl mx-auto">
                            <div className="flex items-center space-x-2">
                                <i className="fas fa-heart text-orange-400"></i>
                                <h1 className="text-lg font-semibold text-gray-800">家庭愿望清单</h1>
                            </div>
                            <button 
                                onClick={() => setShowAddModal(true)}
                                className="bg-white text-orange-500 px-4 py-2 rounded-full hover:bg-orange-50 flex items-center space-x-1"
                            >
                                <span>+</span>
                                <span>添加愿望</span>
                            </button>
                        </div>
                    </header>

                    <div className="max-w-7xl mx-auto p-4 grid grid-cols-12 gap-6">
                        {/* Sidebar */}
                        <div className="col-span-3">
                            <div className="bg-white rounded-lg shadow-sm p-4 space-y-2">
                                <h3 className="font-medium text-gray-700 mb-3 flex items-center">
                                    <i className="fas fa-bars mr-2 text-orange-400"></i>
                                    菜单
                                </h3>
                                
                                <div className="space-y-1">
                                    <div className="flex items-center space-x-3 p-2 rounded hover:bg-gray-50 cursor-pointer">
                                        <i className="fas fa-star text-orange-400"></i>
                                        <span className="text-sm">所有愿望</span>
                                    </div>
                                    
                                    <div className="flex items-center space-x-3 p-2 rounded hover:bg-gray-50 cursor-pointer">
                                        <i className="fas fa-calendar-day text-blue-400"></i>
                                        <span className="text-sm">今日到期</span>
                                    </div>
                                    
                                    <div className="flex items-center space-x-3 p-2 rounded hover:bg-gray-50 cursor-pointer">
                                        <i className="fas fa-check-circle text-green-400"></i>
                                        <span className="text-sm">已完成愿望</span>
                                    </div>
                                    
                                    <div className="flex items-center space-x-3 p-2 rounded hover:bg-gray-50 cursor-pointer">
                                        <i className="fas fa-exclamation-circle text-red-400"></i>
                                        <span className="text-sm">紧急愿望</span>
                                    </div>
                                </div>

                                <div className="mt-6 p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-400">
                                    <div className="flex items-start space-x-2">
                                        <i className="fas fa-lightbulb text-yellow-500 mt-1"></i>
                                        <div>
                                            <h4 className="font-medium text-yellow-800 text-sm">小贴士</h4>
                                            <p className="text-xs text-yellow-700 mt-1">定期更新你的愿望清单，让家庭生活充满惊喜与期待！</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Main Content */}
                        <div className="col-span-6">
                            <div className="bg-white rounded-lg shadow-sm p-6">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-xl font-semibold text-gray-800">家庭愿望清单</h2>
                                    <div className="flex items-center space-x-4">
                                        <i className="fas fa-info-circle text-blue-400"></i>
                                        <span className="text-sm font-medium">愿望统计</span>
                                    </div>
                                </div>

                                {/* Search and Controls */}
                                <div className="flex justify-between items-center mb-6">
                                    <div className="flex items-center space-x-4">
                                        <div className="relative">
                                            <input
                                                type="text"
                                                placeholder="搜索愿望..."
                                                value={searchTerm}
                                                onChange={(e) => setSearchTerm(e.target.value)}
                                                className="pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent w-64"
                                            />
                                            <i className="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                                        </div>
                                        
                                        <select 
                                            value={statusFilter}
                                            onChange={(e) => setStatusFilter(e.target.value)}
                                            className="px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        >
                                            <option>全部显示</option>
                                            <option>未完成</option>
                                            <option>已完成</option>
                                        </select>
                                    </div>
                                    
                                    <div className="flex space-x-2">
                                        <button 
                                            onClick={() => setSortBy(sortBy === "时间" ? "优先级" : "时间")}
                                            className={`px-4 py-2 rounded-lg ${sortBy === "优先级" ? "bg-orange-500 text-white" : "bg-blue-500 text-white"}`}
                                        >
                                            时间优先级
                                        </button>
                                        <button className="px-4 py-2 bg-purple-500 text-white rounded-lg">
                                            <i className="fas fa-filter mr-1"></i>筛选
                                        </button>
                                    </div>
                                </div>

                                {/* Wishes List */}
                                <div className="space-y-4">
                                    {filteredWishes.map(wish => (
                                        <div key={wish.id} className="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                            <div className="flex justify-between items-start">
                                                <div className="flex-1">
                                                    <div className="flex items-center space-x-2 mb-2">
                                                        <h3 className="font-medium text-gray-800">{wish.title}</h3>
                                                        <span className={`px-2 py-1 rounded text-xs ${
                                                            wish.priority === '高' ? 'bg-red-100 text-red-700' :
                                                            wish.priority === '中' ? 'bg-yellow-100 text-yellow-700' :
                                                            'bg-green-100 text-green-700'
                                                        }`}>
                                                            {wish.priority}级
                                                        </span>
                                                    </div>
                                                    
                                                    <div className="flex items-center space-x-2 text-sm text-gray-600 mb-2">
                                                        <i className="fas fa-calendar text-blue-400"></i>
                                                        <span>截止日期: {wish.deadline}</span>
                                                    </div>
                                                    
                                                    <p className="text-sm text-gray-700 mb-3">{wish.description}</p>
                                                    
                                                    <div className="flex items-center justify-between">
                                                        <div className="flex items-center space-x-2">
                                                            <span className="text-sm text-gray-600">状态:</span>
                                                            <label className="relative inline-flex items-center cursor-pointer">
                                                                <input 
                                                                    type="checkbox" 
                                                                    checked={wish.completed}
                                                                    onChange={() => toggleWishStatus(wish.id)}
                                                                    className="sr-only peer"
                                                                />
                                                                <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                                                                <span className="ml-2 text-sm">{wish.status}</span>
                                                            </label>
                                                        </div>
                                                        
                                                        <div className="flex space-x-2">
                                                            <button 
                                                                onClick={() => handleEditWish(wish)}
                                                                className="text-blue-500 hover:text-blue-700"
                                                            >
                                                                <i className="fas fa-edit mr-1"></i>编辑
                                                            </button>
                                                            <button 
                                                                onClick={() => deleteWish(wish.id)}
                                                                className="text-red-500 hover:text-red-700"
                                                            >
                                                                <i className="fas fa-trash mr-1"></i>删除
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>

                        {/* Right Sidebar */}
                        <div className="col-span-3">
                            {/* Statistics Circle */}
                            <div className="bg-white rounded-lg shadow-sm p-4 mb-6">
                                <div className="flex items-center justify-center mb-4">
                                    <div className="relative w-32 h-32">
                                        <svg className="w-32 h-32 transform -rotate-90" viewBox="0 0 128 128">
                                            <circle cx="64" cy="64" r="56" stroke="#f3f4f6" strokeWidth="8" fill="none"/>
                                            <circle 
                                                cx="64" cy="64" r="56" 
                                                stroke="#10b981" 
                                                strokeWidth="8" 
                                                fill="none"
                                                strokeDasharray={`${completionRate * 3.52} 352`}
                                                strokeLinecap="round"
                                            />
                                        </svg>
                                        <div className="absolute inset-0 flex items-center justify-center">
                                            <span className="text-2xl font-bold text-green-600">{completionRate}%</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="space-y-3">
                                    <div className="flex items-center justify-between">
                                        <span className="text-sm text-gray-600">愿望总数</span>
                                        <span className="font-semibold text-gray-800">{totalWishes}</span>
                                    </div>
                                    <div className="flex items-center justify-between">
                                        <span className="text-sm text-gray-600">今日到期</span>
                                        <span className="font-semibold text-gray-800">{todayExpired}</span>
                                    </div>
                                    <div className="flex items-center justify-between">
                                        <span className="text-sm text-gray-600">完成率</span>
                                        <span className="font-semibold text-gray-800">{completionRate}%</span>
                                    </div>
                                </div>
                            </div>

                            {/* Quick Actions */}
                            <div className="bg-white rounded-lg shadow-sm p-4">
                                <h3 className="font-medium text-gray-700 mb-3 flex items-center">
                                    <i className="fas fa-bolt text-purple-400 mr-2"></i>
                                    快速操作
                                </h3>
                                
                                <div className="space-y-2">
                                    <button 
                                        onClick={() => setShowAddModal(true)}
                                        className="w-full bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 flex items-center justify-center"
                                    >
                                        <i className="fas fa-plus mr-2"></i>
                                        添加新愿望
                                    </button>
                                    
                                    <button className="w-full bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center justify-center">
                                        <i className="fas fa-file-print mr-2"></i>
                                        打印清单
                                    </button>
                                    
                                    <button className="w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 flex items-center justify-center">
                                        <i className="fas fa-share mr-2"></i>
                                        分享清单
                                    </button>
                                </div>
                            </div>
                        </div>

                        {/* Bottom Section */}
                        <div className="col-span-12 mt-6">
                            <div className="grid grid-cols-2 gap-6">
                                {/* How to Use */}
                                <div className="bg-white rounded-lg shadow-sm p-6">
                                    <h3 className="font-medium text-gray-700 mb-3 flex items-center">
                                        <i className="fas fa-info-circle text-blue-400 mr-2"></i>
                                        如何使用家庭愿望清单
                                    </h3>
                                    
                                    <ol className="list-decimal list-inside space-y-1 text-sm text-gray-600">
                                        <li>点击"添加愿望"按钮，填写愿望标题、截止日期和其他信息</li>
                                        <li>点击卡片右上角的"编辑"按钮修改愿望详情</li>
                                        <li>点击"删除"按钮可以移除不需要的愿望</li>
                                        <li>通过筛选和排序功能快速查找特定愿望</li>
                                        <li>使用开关切换愿望的完成状态</li>
                                    </ol>
                                </div>

                                {/* Tips */}
                                <div className="bg-white rounded-lg shadow-sm p-6">
                                    <h3 className="font-medium text-gray-700 mb-3 flex items-center">
                                        <i className="fas fa-lightbulb text-yellow-500 mr-2"></i>
                                        温馨提示
                                    </h3>
                                    
                                    <p className="text-sm text-gray-600 mb-3">
                                        和家人一起制定愿望清单，让每一个家庭成员都能参与其中！记录下你们想要一起完成的事情，创造美好回忆。
                                    </p>
                                    
                                    <div className="text-xs text-gray-500">
                                        <div>家庭愿望清单 v1.0</div>
                                        <div>联系我们: family@wishlist.example.com</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Add Wish Modal */}
                    {showAddModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div className="bg-white rounded-lg p-6 w-96 max-w-md mx-4">
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="text-lg font-semibold flex items-center">
                                        <i className="fas fa-plus text-orange-500 mr-2"></i>
                                        添加愿望
                                    </h3>
                                    <button 
                                        onClick={() => setShowAddModal(false)}
                                        className="text-gray-400 hover:text-gray-600"
                                    >
                                        <i className="fas fa-times"></i>
                                    </button>
                                </div>
                                
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            愿望标题 *
                                        </label>
                                        <input
                                            type="text"
                                            value={newWish.title}
                                            onChange={(e) => setNewWish({...newWish, title: e.target.value})}
                                            placeholder="输入愿望标题"
                                            className="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            截止日期 *
                                        </label>
                                        <input
                                            type="date"
                                            value={newWish.deadline}
                                            onChange={(e) => setNewWish({...newWish, deadline: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            优先级
                                        </label>
                                        <div className="flex space-x-4">
                                            {['高', '中', '低'].map(priority => (
                                                <label key={priority} className="flex items-center">
                                                    <input
                                                        type="radio"
                                                        name="priority"
                                                        value={priority}
                                                        checked={newWish.priority === priority}
                                                        onChange={(e) => setNewWish({...newWish, priority: e.target.value})}
                                                        className="mr-1"
                                                    />
                                                    {priority}
                                                </label>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            备注
                                        </label>
                                        <textarea
                                            value={newWish.description}
                                            onChange={(e) => setNewWish({...newWish, description: e.target.value})}
                                            placeholder="添加备注信息..."
                                            rows="3"
                                            className="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400"
                                        ></textarea>
                                    </div>
                                </div>
                                
                                <div className="flex justify-end space-x-3 mt-6">
                                    <button 
                                        onClick={() => setShowAddModal(false)}
                                        className="px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50"
                                    >
                                        取消添加
                                    </button>
                                    <button 
                                        onClick={handleAddWish}
                                        className="px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600"
                                    >
                                        添加愿望
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Edit Wish Modal */}
                    {showEditModal && editingWish && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                            <div className="bg-white rounded-lg p-6 w-96 max-w-md mx-4">
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="text-lg font-semibold flex items-center">
                                        <i className="fas fa-edit text-blue-500 mr-2"></i>
                                        编辑愿望
                                    </h3>
                                    <button 
                                        onClick={() => setShowEditModal(false)}
                                        className="text-gray-400 hover:text-gray-600"
                                    >
                                        <i className="fas fa-times"></i>
                                    </button>
                                </div>
                                
                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            愿望标题 *
                                        </label>
                                        <input
                                            type="text"
                                            value={editingWish.title}
                                            onChange={(e) => setEditingWish({...editingWish, title: e.target.value})}
                                            className="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            截止日期 *
                                        </label>
                                        <input
                                            type="text"
                                            value={editingWish.deadline.split('/').reverse().join('/')}
                                            onChange={(e) => {
                                                const dateValue = e.target.value.split('/');
                                                const formattedDate = dateValue.length === 3 ? `${dateValue[2]}/${dateValue[1]}/${dateValue[0]}` : dateValue[0];
                                                setEditingWish({...editingWish, deadline: formattedDate});
                                            }}
                                            placeholder="mm/dd/yyyy"
                                            className="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            优先级
                                        </label>
                                        <div className="flex space-x-4">
                                            {['高', '中', '低'].map(priority => (
                                                <label key={priority} className="flex items-center">
                                                    <input
                                                        type="radio"
                                                        name="editPriority"
                                                        value={priority}
                                                        checked={editingWish.priority === priority}
                                                        onChange={(e) => setEditingWish({...editingWish, priority: e.target.value})}
                                                        className="mr-1"
                                                    />
                                                    {priority}
                                                </label>
                                            ))}
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">
                                            备注
                                        </label>
                                        <textarea
                                            value={editingWish.description}
                                            onChange={(e) => setEditingWish({...editingWish, description: e.target.value})}
                                            rows="3"
                                            className="w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
                                        ></textarea>
                                    </div>
                                </div>
                                
                                <div className="flex justify-end space-x-3 mt-6">
                                    <button 
                                        onClick={() => setShowEditModal(false)}
                                        className="px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50"
                                    >
                                        取消编辑
                                    </button>
                                    <button 
                                        onClick={handleSaveEdit}
                                        className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                                    >
                                        保存修改
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<WishlistApp />, document.getElementById('root'));
    </script>
</body>
</html>